<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>SET TRANSACTION</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.2 Documentation">
<link rel="up" href="sql-commands.html" title="SQL Commands">
<link rel="previous" href="sql-set-session-authorization.html" title="SET SESSION AUTHORIZATION">
<link rel="next" href="sql-show.html" title="SHOW">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="sql-set-transaction"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv">
<h2>Name</h2>
<p>SET TRANSACTION &#8212; set the characteristics of the current transaction</p>
</div>
<a name="id2703126"></a><div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">SET TRANSACTION <i class="replaceable"><tt>transaction_mode</tt></i> [, ...]
SET SESSION CHARACTERISTICS AS TRANSACTION <i class="replaceable"><tt>transaction_mode</tt></i> [, ...]

where <i class="replaceable"><tt>transaction_mode</tt></i> is one of:

    ISOLATION LEVEL { SERIALIZABLE | REPEATABLE READ | READ COMMITTED | READ UNCOMMITTED }
    READ WRITE | READ ONLY</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2703158"></a><h2>Description</h2>
<p>   The <tt class="command">SET TRANSACTION</tt> command sets the
   characteristics of the current transaction. It has no effect on any
   subsequent transactions.  <tt class="command">SET SESSION
   CHARACTERISTICS</tt> sets the default transaction
   characteristics for subsequent transactions of a session.  These
   defaults can be overridden by <tt class="command">SET TRANSACTION</tt>
   for an individual transaction.
  </p>
<p>   The available transaction characteristics are the transaction
   isolation level and the transaction access mode (read/write or
   read-only).
  </p>
<p>   The isolation level of a transaction determines what data the
   transaction can see when other transactions are running concurrently:

   </p>
<div class="variablelist"><dl>
<dt><span class="term"><tt class="literal">READ COMMITTED</tt></span></dt>
<dd><p>       A statement can only see rows committed before it began. This
       is the default.
      </p></dd>
<dt><span class="term"><tt class="literal">SERIALIZABLE</tt></span></dt>
<dd><p>       All statements of the current transaction can only see rows committed
       before the first query or data-modification statement was executed in
       this transaction.
      </p></dd>
</dl></div>
<p>

   The SQL standard defines two additional levels, <tt class="literal">READ
   UNCOMMITTED</tt> and <tt class="literal">REPEATABLE READ</tt>.
   In <span class="productname">PostgreSQL</span> <tt class="literal">READ
   UNCOMMITTED</tt> is treated as
   <tt class="literal">READ COMMITTED</tt>, while <tt class="literal">REPEATABLE
   READ</tt> is treated as <tt class="literal">SERIALIZABLE</tt>.
  </p>
<p>   The transaction isolation level cannot be changed after the first query or
   data-modification statement (<tt class="command">SELECT</tt>,
   <tt class="command">INSERT</tt>, <tt class="command">DELETE</tt>,
   <tt class="command">UPDATE</tt>, <tt class="command">FETCH</tt>, or
   <tt class="command">COPY</tt>) of a transaction has been executed.  See
   <a href="mvcc.html" title="Chapter 12. Concurrency Control">Chapter 12, <i>Concurrency Control</i></a> for more information about transaction
   isolation and concurrency control.
  </p>
<p>   The transaction access mode determines whether the transaction is
   read/write or read-only.  Read/write is the default.  When a
   transaction is read-only, the following SQL commands are
   disallowed: <tt class="literal">INSERT</tt>, <tt class="literal">UPDATE</tt>,
   <tt class="literal">DELETE</tt>, and <tt class="literal">COPY TO</tt> if the
   table they would write to is not a temporary table; all
   <tt class="literal">CREATE</tt>, <tt class="literal">ALTER</tt>, and
   <tt class="literal">DROP</tt> commands; <tt class="literal">COMMENT</tt>,
   <tt class="literal">GRANT</tt>, <tt class="literal">REVOKE</tt>,
   <tt class="literal">TRUNCATE</tt>; and <tt class="literal">EXPLAIN ANALYZE</tt>
   and <tt class="literal">EXECUTE</tt> if the command they would execute is
   among those listed.  This is a high-level notion of read-only that
   does not prevent all writes to disk.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2703377"></a><h2>Notes</h2>
<p>   If <tt class="command">SET TRANSACTION</tt> is executed without a prior
   <tt class="command">START TRANSACTION</tt> or  <tt class="command">BEGIN</tt>,
   it will appear to have no effect, since the transaction will immediately
   end.
  </p>
<p>   It is possible to dispense with <tt class="command">SET TRANSACTION</tt>
   by instead specifying the desired <i class="replaceable"><tt>transaction_modes</tt></i> in
   <tt class="command">BEGIN</tt> or <tt class="command">START TRANSACTION</tt>.
  </p>
<p>   The session default transaction modes can also be set by setting the
   configuration parameters <a href="runtime-config.html#guc-default-transaction-isolation">default_transaction_isolation</a>
   and <a href="runtime-config.html#guc-default-transaction-read-only">default_transaction_read_only</a>.
   (In fact <tt class="command">SET SESSION CHARACTERISTICS</tt> is just a
   verbose equivalent for setting these variables with <tt class="command">SET</tt>.)
   This means the defaults can be set in the configuration file, via
   <tt class="command">ALTER DATABASE</tt>, etc.  Consult <a href="runtime-config.html" title="16.4. Run-time Configuration">Section 16.4, &#8220;Run-time Configuration&#8221;</a>
   for more information.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="r1-sql-set-transaction-3"></a><h2>Compatibility</h2>
<p>   Both commands are defined in the <span class="acronym">SQL</span> standard.
   <tt class="literal">SERIALIZABLE</tt> is the default transaction
   isolation level in the standard.  In
   <span class="productname">PostgreSQL</span> the default is ordinarily
   <tt class="literal">READ COMMITTED</tt>, but you can change it as
   mentioned above.  Because of lack of predicate locking, the
   <tt class="literal">SERIALIZABLE</tt> level is not truly
   serializable. See <a href="mvcc.html" title="Chapter 12. Concurrency Control">Chapter 12, <i>Concurrency Control</i></a> for details.
  </p>
<p>   In the SQL standard, there is one other transaction characteristic
   that can be set with these commands: the size of the diagnostics
   area.  This concept is specific to embedded SQL, and therefore is
   not implemented in the <span class="productname">PostgreSQL</span> server.
  </p>
<p>   The SQL standard requires commas between successive <i class="replaceable"><tt>transaction_modes</tt></i>, but for historical
   reasons <span class="productname">PostgreSQL</span> allows the commas to be
   omitted.
  </p>
</div>
</div></body>
</html>
