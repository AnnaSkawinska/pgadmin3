<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>29.4. Running SQL Commands</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.2 Documentation">
<link rel="up" href="ecpg.html" title="Chapter 29. ECPG - Embedded SQL in C">
<link rel="previous" href="ecpg-disconnect.html" title="29.3. Closing a Connection">
<link rel="next" href="ecpg-set-connection.html" title="29.5. Choosing a Connection">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="ecpg-commands"></a>29.4. Running SQL Commands</h2></div></div>
<div></div>
</div>
<p>   Any SQL command can be run from within an embedded SQL application.
   Below are some examples of how to do that.
  </p>
<p>   Creating a table:
</p>
<pre class="programlisting">EXEC SQL CREATE TABLE foo (number integer, ascii char(16));
EXEC SQL CREATE UNIQUE INDEX num1 ON foo(number);
EXEC SQL COMMIT;</pre>
<p>
  </p>
<p>   Inserting rows:
</p>
<pre class="programlisting">EXEC SQL INSERT INTO foo (number, ascii) VALUES (9999, 'doodad');
EXEC SQL COMMIT;</pre>
<p>
  </p>
<p>   Deleting rows:
</p>
<pre class="programlisting">EXEC SQL DELETE FROM foo WHERE number = 9999;
EXEC SQL COMMIT;</pre>
<p>
  </p>
<p>   Single-row select:
</p>
<pre class="programlisting">EXEC SQL SELECT foo INTO :FooBar FROM table1 WHERE ascii = 'doodad';</pre>
<p>
  </p>
<p>   Select using cursors:
</p>
<pre class="programlisting">EXEC SQL DECLARE foo_bar CURSOR FOR
    SELECT number, ascii FROM foo
    ORDER BY ascii;
EXEC SQL OPEN foo_bar;
EXEC SQL FETCH foo_bar INTO :FooBar, DooDad;
...
EXEC SQL CLOSE foo_bar;
EXEC SQL COMMIT;</pre>
<p>
  </p>
<p>   Updates:
</p>
<pre class="programlisting">EXEC SQL UPDATE foo
    SET ascii = 'foobar'
    WHERE number = 9999;
EXEC SQL COMMIT;</pre>
<p>
  </p>
<p>   The tokens of the form
   <tt class="literal">:<i class="replaceable"><tt>something</tt></i></tt> are
   <i class="firstterm">host variables</i>, that is, they refer to
   variables in the C program.  They are explained in <a href="ecpg-variables.html" title="29.6. Using Host Variables">Section 29.6, &#8220;Using Host Variables&#8221;</a>.
  </p>
<p>   In the default mode, statements are committed only when
   <tt class="command">EXEC SQL COMMIT</tt> is issued. The embedded SQL
   interface also supports autocommit of transactions (similar to
   <span class="application">libpq</span> behavior) via the <tt class="option">-t</tt> command-line
   option to <tt class="command">ecpg</tt> (see below) or via the <tt class="literal">EXEC SQL
   SET AUTOCOMMIT TO ON</tt> statement. In autocommit mode, each
   command is automatically committed unless it is inside an explicit
   transaction block. This mode can be explicitly turned off using
   <tt class="literal">EXEC SQL SET AUTOCOMMIT TO OFF</tt>.
  </p>
</div></body>
</html>
