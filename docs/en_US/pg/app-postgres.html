<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>postgres</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.1devel Documentation">
<link rel="up" href="reference-server.html" title="PostgreSQL Server Applications">
<link rel="previous" href="app-pgresetxlog.html" title="pg_resetxlog">
<link rel="next" href="app-postmaster.html" title="postmaster">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="app-postgres"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv">
<h2>Name</h2>
<p>postgres &#8212; run a <span class="productname">PostgreSQL</span> server in single-user mode</p>
</div>
<a name="id2721986"></a><div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="cmdsynopsis"><p><tt class="command">postgres</tt> [-A   [0] |  [1] ] [-B <i class="replaceable"><tt>nbuffers</tt></i>] [-c <i class="replaceable"><tt>name</tt></i>=<i class="replaceable"><tt>value</tt></i>] [-d <i class="replaceable"><tt>debug-level</tt></i>] [--describe-config] [-D <i class="replaceable"><tt>datadir</tt></i>] [-e] [-E] [-f  [s] |  [i] |  [t] |  [n] |  [m] |  [h] ] [-F] [-N] [-o <i class="replaceable"><tt>filename</tt></i>] [-O] [-P] [[-s] |  [-t  [pa] |  [pl] |  [ex] ]] [-S <i class="replaceable"><tt>work-mem</tt></i>] [-W <i class="replaceable"><tt>seconds</tt></i>] [--<i class="replaceable"><tt>name</tt></i>=<i class="replaceable"><tt>value</tt></i>]  <i class="replaceable"><tt>database</tt></i> <br><tt class="command">postgres</tt> [-A   [0] |  [1] ] [-B <i class="replaceable"><tt>nbuffers</tt></i>] [-c <i class="replaceable"><tt>name</tt></i>=<i class="replaceable"><tt>value</tt></i>] [-d <i class="replaceable"><tt>debug-level</tt></i>] [-D <i class="replaceable"><tt>datadir</tt></i>] [-e] [-f  [s] |  [i] |  [t] |  [n] |  [m] |  [h] ] [-F] [-o <i class="replaceable"><tt>filename</tt></i>] [-O] [-p <i class="replaceable"><tt>database</tt></i>] [-P] [[-s] |  [-t  [pa] |  [pl] |  [ex] ]] [-S <i class="replaceable"><tt>work-mem</tt></i>] [-v <i class="replaceable"><tt>protocol</tt></i>] [-W <i class="replaceable"><tt>seconds</tt></i>] [--<i class="replaceable"><tt>name</tt></i>=<i class="replaceable"><tt>value</tt></i>]</p></div>
</div>
<div class="refsect1" lang="en">
<a name="id2722499"></a><h2>Description</h2>
<p>   The <tt class="command">postgres</tt> executable is the actual
   <span class="productname">PostgreSQL</span> server process that processes
   queries.  It is normally not called directly; instead a <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a> multiuser server is started.
  </p>
<p>   The second form above is how
   <tt class="command">postgres</tt> is invoked by the <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a> (only
   conceptually, since both <tt class="filename">postmaster</tt> and
   <tt class="filename">postgres</tt> are in fact the same program); it
   should not be invoked directly this way.  The first form invokes
   the server directly in interactive single-user mode.  The primary use
   for this mode is during bootstrapping by <a href="app-initdb.html" title="initdb"><span class="refentrytitle"><a name="app-initdb-title"></a>initdb</span></a>.
   Sometimes it is used for debugging or disaster recovery.
  </p>
<p>   When invoked in interactive mode from the shell, the user can enter
   queries and the results will be printed to the screen, but in a
   form that is more useful for developers than end users.  But note
   that running a single-user server is not truly suitable for
   debugging the server since no realistic interprocess communication
   and locking will happen.
  </p>
<p>   When running a stand-alone server, the session user will be set to
   the user with ID 1.  This user does not actually have to exist, so
   a stand-alone server can be used to manually recover from certain
   kinds of accidental damage to the system catalogs.  Implicit
   superuser powers are granted to the user with ID 1 in stand-alone
   mode.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2722585"></a><h2>Options</h2>
<p>    When <tt class="command">postgres</tt> is started by a <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a> then it
    inherits all options set by the latter.  Additionally,
    <tt class="command">postgres</tt>-specific options can be passed
    from the <tt class="command">postmaster</tt> with the
    <tt class="option">-o</tt> switch.
   </p>
<p>    You can avoid having to type these options by setting up a
    configuration file.  See <a href="runtime-config.html" title="16.4. Run-time Configuration">Section 16.4, &#8220;Run-time Configuration&#8221;</a> for details.  Some
    (safe) options can also be set from the connecting client in an
    application-dependent way.  For example, if the environment
    variable <tt class="envar">PGOPTIONS</tt> is set, then
    <span class="application">libpq</span>-based clients will pass that string to the
    server, which will interpret it as
    <tt class="command">postgres</tt> command-line options.
   </p>
<div class="refsect2" lang="en">
<a name="id2722650"></a><h3>General Purpose</h3>
<p>     The options <tt class="option">-A</tt>, <tt class="option">-B</tt>,
     <tt class="option">-c</tt>, <tt class="option">-d</tt>, <tt class="option">-D</tt>,
     <tt class="option">-F</tt>, and <tt class="option">--<i class="replaceable"><tt>name</tt></i></tt> have the same meanings
     as the <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a> except that
     <tt class="literal">-d 0</tt> prevents the server log level of
     the <tt class="command">postmaster</tt> from being propagated to <tt class="command">postgres</tt>.
    </p>
<div class="variablelist"><dl>
<dt><span class="term"><tt class="option">-e</tt></span></dt>
<dd><p>        Sets the default date style to &#8220;<span class="quote">European</span>&#8221;, that is
	<tt class="literal">DMY</tt> ordering of input date fields.  This also causes
	the day to be printed before the month in certain date output formats.
	See <a href="datatype-datetime.html" title="8.5. Date/Time Types">Section 8.5, &#8220;Date/Time Types&#8221;</a> for more information.
       </p></dd>
<dt><span class="term"><tt class="option">-o</tt> <i class="replaceable"><tt>filename</tt></i></span></dt>
<dd><p>	Send all server log output to 
	<i class="replaceable"><tt>filename</tt></i>.
	If <tt class="command">postgres</tt> is running under the
	<tt class="command">postmaster</tt>, this option is ignored,
	and the <span class="systemitem">stderr</span> inherited from the
	<tt class="command">postmaster</tt> is used.
       </p></dd>
<dt><span class="term"><tt class="option">-P</tt></span></dt>
<dd><p>	Ignore system indexes when reading system tables (but still update
	the indexes when modifying the tables).  This is useful when
	recovering from damaged system indexes.
       </p></dd>
<dt><span class="term"><tt class="option">-s</tt></span></dt>
<dd><p>	Print time information and other statistics at the end of each command.
	This is useful for benchmarking or for use in tuning the number of
	buffers.
       </p></dd>
<dt><span class="term"><tt class="option">-S</tt> <i class="replaceable"><tt>work-mem</tt></i></span></dt>
<dd><p>	Specifies the amount of memory to be used by internal sorts and hashes
	before resorting to temporary disk files.  See the description of the
	<tt class="varname">work_mem</tt> configuration parameter in <a href="runtime-config.html#runtime-config-resource-memory" title="16.4.3.1. Memory">Section 16.4.3.1, &#8220;Memory&#8221;</a>.
       </p></dd>
</dl></div>
</div>
<div class="refsect2" lang="en">
<a name="id2722828"></a><h3>Options for stand-alone mode</h3>
<div class="variablelist"><dl>
<dt><span class="term"><i class="replaceable"><tt>database</tt></i></span></dt>
<dd><p>	Specifies the name of the database to be accessed.  If it is
	omitted it defaults to the user name.	
       </p></dd>
<dt><span class="term"><tt class="option">-E</tt></span></dt>
<dd><p>	Echo all commands.
       </p></dd>
<dt><span class="term"><tt class="option">-N</tt></span></dt>
<dd><p>	Disables use of newline as a statement delimiter.
       </p></dd>
</dl></div>
</div>
<div class="refsect2" lang="en">
<a name="id2722861"></a><h3>Semi-internal Options</h3>
<p>     There are several other options that may be specified, used
     mainly for debugging purposes.  These are listed here only for
     the use by <span class="productname">PostgreSQL</span> system
     developers.  <span class="emphasis"><em>Use of any of these options is highly
     discouraged.</em></span>  Furthermore, any of these options may
     disappear or change in a future release without notice.
   </p>
<div class="variablelist"><dl>
<dt><span class="term"><tt class="option">-f</tt> <tt class="literal">{ s | i | m | n | h }</tt></span></dt>
<dd>
<p>	Forbids the use of particular scan and join methods:
	<tt class="literal">s</tt> and <tt class="literal">i</tt>
	disable sequential and index scans respectively, while
	<tt class="literal">n</tt>, <tt class="literal">m</tt>, and <tt class="literal">h</tt>
	disable nested-loop, merge and hash joins respectively.
       </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>	  Neither sequential scans nor nested-loop joins can be disabled completely;
	  the <tt class="literal">-fs</tt> and <tt class="literal">-fn</tt>
	  options simply discourage the optimizer from using those
	  plan types if it has any other alternative.
	 </p>
</div>
</dd>
<dt><span class="term"><tt class="option">-O</tt></span></dt>
<dd><p>	Allows the structure of system tables to be modified.  This is
	used by <tt class="command">initdb</tt>.
       </p></dd>
<dt><span class="term"><tt class="option">-p</tt> <i class="replaceable"><tt>database</tt></i></span></dt>
<dd><p>	Indicates that this process has been started by a
	<tt class="command">postmaster</tt> and specifies the database to use.
	etc.
       </p></dd>
<dt><span class="term"><tt class="option">-t</tt> <tt class="literal">pa[rser] | pl[anner] | e[xecutor]</tt></span></dt>
<dd><p>	Print timing statistics for each query relating to each of the
	major system modules.  This option cannot be used together
	with the <tt class="option">-s</tt> option.
       </p></dd>
<dt><span class="term"><tt class="option">-v</tt> <i class="replaceable"><tt>protocol</tt></i></span></dt>
<dd><p>	Specifies the version number of the frontend/backend protocol
	to be used for this particular session.
       </p></dd>
<dt><span class="term"><tt class="option">-W</tt> <i class="replaceable"><tt>seconds</tt></i></span></dt>
<dd><p>	As soon as this option is encountered, the process sleeps for
	the specified amount of seconds.  This gives developers time
	to attach a debugger to the server process.
       </p></dd>
<dt><span class="term"><tt class="option">--describe-config</tt></span></dt>
<dd><p>        This option dumps out the server's internal configuration variables, 
        descriptions, and defaults in tab-delimited <tt class="command">COPY</tt> format.
        It is designed primarily for use by administration tools.
       </p></dd>
</dl></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2723050"></a><h2>Environment</h2>
<div class="variablelist"><dl>
<dt><span class="term"><tt class="envar">PGDATA</tt></span></dt>
<dd><p>      Default data directory location
     </p></dd>
</dl></div>
<p>   For others, which have little influence during single-user mode,
   see <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a>.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2723073"></a><h2>Notes</h2>
<p>   To cancel a running query, send the <tt class="literal">SIGINT</tt> signal
   to the <tt class="command">postgres</tt> process running that command.
  </p>
<p>   To tell <tt class="command">postgres</tt> to reload the configuration files,
   send a <tt class="literal">SIGHUP</tt> signal.  Normally it's best to
   <tt class="literal">SIGHUP</tt> the <tt class="command">postmaster</tt> instead;
   the <tt class="command">postmaster</tt> will in turn <tt class="literal">SIGHUP</tt>
   each of its children.  But in some cases it might be desirable to have only
   one <tt class="command">postgres</tt> process reload the configuration files.
  </p>
<p>   The <tt class="command">postmaster</tt> uses <tt class="literal">SIGTERM</tt>
   to tell a <tt class="command">postgres</tt> process to quit normally and
   <tt class="literal">SIGQUIT</tt> to terminate without the normal cleanup.
   These signals <span class="emphasis"><em>should not</em></span> be used by users.  It is also
   unwise to send <tt class="literal">SIGKILL</tt> to a <tt class="command">postgres</tt>
   process [mdash ] the <tt class="command">postmaster</tt> will interpret this as
   a crash in <tt class="command">postgres</tt>, and will force all the sibling
   <tt class="command">postgres</tt> processes to quit as part of its standard
   crash-recovery procedure.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2723204"></a><h2>Usage</h2>
<p>    Start a stand-alone server with a command like
</p>
<pre class="screen"><b class="userinput"><tt>postgres -D /usr/local/pgsql/data <i class="replaceable"><tt>other-options</tt></i> my_database</tt></b></pre>
<p>
    Provide the correct path to the database directory with <tt class="option">-D</tt>, or
    make sure that the environment variable <tt class="envar">PGDATA</tt> is set.
    Also specify the name of the particular database you want to work in.
   </p>
<p>    Normally, the stand-alone server treats newline as the command
    entry terminator; there is no intelligence about semicolons,
    as there is in <span class="application">psql</span>.  To continue a command
    across multiple lines, you must type backslash just before each
    newline except the last one.
   </p>
<p>    But if you use the <tt class="option">-N</tt> command line switch, then newline does
    not terminate command entry.  In this case, the server will read the standard input
    until the end-of-file (<span class="acronym">EOF</span>) marker, then
    process the input as a single command string.  Backslash-newline is not
    treated specially in this case.
   </p>
<p>    To quit the session, type <span class="acronym">EOF</span>
    (<span><b class="keycap">Control</b></span>+<span><b class="keycap">D</b></span>, usually).
    If you've
    used <tt class="option">-N</tt>, two consecutive <span class="acronym">EOF</span>s are needed to exit.
   </p>
<p>    Note that the stand-alone server does not provide sophisticated
    line-editing features (no command history, for example).
   </p>
</div>
<div class="refsect1" lang="en">
<a name="id2723295"></a><h2>See Also</h2>
<p>   <a href="app-initdb.html" title="initdb"><span class="refentrytitle"><a name="app-initdb-title"></a>initdb</span></a>,
   <a href="app-ipcclean.html" title="ipcclean"><span class="refentrytitle"><a name="app-ipcclean-title"></a><span class="application">ipcclean</span></span></a>,
   <a href="app-postmaster.html" title="postmaster"><span class="refentrytitle"><a name="app-postmaster-title"></a><span class="application">postmaster</span></span></a>
  </p>
</div>
</div></body>
</html>
