<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Chapter 43. PostgreSQL Coding Conventions</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.2 Documentation">
<link rel="up" href="internals.html" title="Part VII. Internals">
<link rel="previous" href="protocol-changes.html" title="42.6. Summary of Changes since Protocol 2.0">
<link rel="next" href="error-message-reporting.html" title="43.2. Reporting Errors Within the Server">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="en" id="source">
<div class="titlepage">
<div><div><h2 class="title">
<a name="source"></a>Chapter 43. PostgreSQL Coding Conventions</h2></div></div>
<div></div>
</div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="source.html#source-format">43.1. Formatting</a></span></dt>
<dt><span class="sect1"><a href="error-message-reporting.html">43.2. Reporting Errors Within the Server</a></span></dt>
<dt><span class="sect1"><a href="error-style-guide.html">43.3. Error Message Style Guide</a></span></dt>
</dl>
</div>
<div class="sect1" lang="en">
<div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="source-format"></a>43.1. Formatting</h2></div></div>
<div></div>
</div>
<p>    Source code formatting uses 4 column tab spacing, with 
    tabs preserved (i.e. tabs are not expanded to spaces).
    Each logical indentation level is one additional tab stop.
    Layout rules (brace positioning, etc) follow BSD conventions.
   </p>
<p>    While submitted patches do not absolutely have to follow these formatting
    rules, it's a good idea to do so.  Your code will get run through
    <span class="application">pgindent</span>, so there's no point in making it look nice
    under some other set of formatting conventions.
   </p>
<p>    For <span class="productname">Emacs</span>, add the following (or
    something similar) to your <tt class="filename">~/.emacs</tt> 
    initialization file:

</p>
<pre class="programlisting">;; check for files with a path containing "postgres" or "pgsql"
(setq auto-mode-alist
  (cons '("\\(postgres\\|pgsql\\).*\\.[ch]\\'" . pgsql-c-mode)
        auto-mode-alist))
(setq auto-mode-alist
  (cons '("\\(postgres\\|pgsql\\).*\\.cc\\'" . pgsql-c-mode)
        auto-mode-alist))

(defun pgsql-c-mode ()
  ;; sets up formatting for PostgreSQL C code
  (interactive)
  (c-mode)
  (setq-default tab-width 4)
  (c-set-style "bsd")             ; set c-basic-offset to 4, plus other stuff
  (c-set-offset 'case-label '+)   ; tweak case indent to match PG custom
  (setq indent-tabs-mode t))      ; make sure we keep tabs when indenting</pre>
<p>
   </p>
<p>    For <span class="application">vi</span>, your
    <tt class="filename">~/.vimrc</tt> or equivalent file should contain
    the following:

</p>
<pre class="programlisting">set tabstop=4</pre>
<p>

    or equivalently from within <span class="application">vi</span>, try

</p>
<pre class="programlisting">:set ts=4</pre>
<p>
   </p>
<p>    The text browsing tools <span class="application">more</span> and
    <span class="application">less</span> can be invoked as
</p>
<pre class="programlisting">more -x4
less -x4</pre>
<p>
    to make them show tabs appropriately.
   </p>
</div>
</div></body>
</html>
