<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>9.19. System Information Functions</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.1devel Documentation">
<link rel="up" href="functions.html" title="Chapter 9. Functions and Operators">
<link rel="previous" href="functions-srf.html" title="9.18. Set Returning Functions">
<link rel="next" href="functions-admin.html" title="9.20. System Administration Functions">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="functions-info"></a>9.19. System Information Functions</h2></div></div>
<div></div>
</div>
<p>   <a href="functions-info.html#functions-info-session-table" title="Table 9.39. Session Information Functions">Table 9.39, &#8220;Session Information Functions&#8221;</a> shows several
   functions that extract session and system information.
  </p>
<div class="table">
<a name="functions-info-session-table"></a><p class="title"><b>Table 9.39. Session Information Functions</b></p>
<table summary="Session Information Functions" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Return Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><tt class="function">current_database()</tt></td>
<td><tt class="type">name</tt></td>
<td>name of current database</td>
</tr>
<tr>
<td><tt class="function">current_schema()</tt></td>
<td><tt class="type">name</tt></td>
<td>name of current schema</td>
</tr>
<tr>
<td><tt class="function">current_schemas(boolean)</tt></td>
<td><tt class="type">name[]</tt></td>
<td>names of schemas in search path optionally including implicit schemas</td>
</tr>
<tr>
<td><tt class="function">current_user</tt></td>
<td><tt class="type">name</tt></td>
<td>user name of current execution context</td>
</tr>
<tr>
<td><tt class="function">inet_client_addr()</tt></td>
<td><tt class="type">inet</tt></td>
<td>address of the remote connection</td>
</tr>
<tr>
<td><tt class="function">inet_client_port()</tt></td>
<td><tt class="type">int4</tt></td>
<td>port of the remote connection</td>
</tr>
<tr>
<td><tt class="function">inet_server_addr()</tt></td>
<td><tt class="type">inet</tt></td>
<td>address of the local connection</td>
</tr>
<tr>
<td><tt class="function">inet_server_port()</tt></td>
<td><tt class="type">int4</tt></td>
<td>port of the local connection</td>
</tr>
<tr>
<td><tt class="function">session_user</tt></td>
<td><tt class="type">name</tt></td>
<td>session user name</td>
</tr>
<tr>
<td><tt class="function">user</tt></td>
<td><tt class="type">name</tt></td>
<td>equivalent to <tt class="function">current_user</tt>
</td>
</tr>
<tr>
<td><tt class="function">version()</tt></td>
<td><tt class="type">text</tt></td>
<td>PostgreSQL version information</td>
</tr>
</tbody>
</table>
</div>
<a name="id2564130"></a><a name="id2564142"></a><a name="id2564154"></a><p>    The <tt class="function">session_user</tt> is normally the user who initiated
    the current database connection; but superusers can change this setting
    with <a href="sql-set-session-authorization.html" title="SET SESSION AUTHORIZATION"><span class="refentrytitle"><a name="sql-set-session-authorization-title"></a>SET SESSION AUTHORIZATION</span></a>.
    The <tt class="function">current_user</tt> is the user identifier
    that is applicable for permission checking. Normally, it is equal
    to the session user, but it changes during the execution of
    functions with the attribute <tt class="literal">SECURITY DEFINER</tt>.
    In Unix parlance, the session user is the &#8220;<span class="quote">real user</span>&#8221; and
    the current user is the &#8220;<span class="quote">effective user</span>&#8221;.
   </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>     <tt class="function">current_user</tt>, <tt class="function">session_user</tt>, and
     <tt class="function">user</tt> have special syntactic status in <span class="acronym">SQL</span>:
     they must be called without trailing parentheses.
    </p>
</div>
<p>    <tt class="function">current_schema</tt> returns the name of the schema that is
    at the front of the search path (or a null value if the search path is
    empty).  This is the schema that will be used for any tables or
    other named objects that are created without specifying a target schema.
    <tt class="function">current_schemas(boolean)</tt> returns an array of the names of all
    schemas presently in the search path.  The Boolean option determines whether or not
    implicitly included system schemas such as <tt class="literal">pg_catalog</tt> are included in the search 
    path returned.
   </p>
<div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>     The search path may be altered at run time.  The command is:
</p>
<pre class="programlisting">SET search_path TO <i class="replaceable"><tt>schema</tt></i> [<span class="optional">, <i class="replaceable"><tt>schema</tt></i>, ...</span>]</pre>
<p>
    </p>
</div>
<a name="id2564282"></a><a name="id2564291"></a><a name="id2564300"></a><a name="id2564310"></a><p>     <tt class="function">inet_client_addr</tt> returns the IP address of the
     current client, and <tt class="function">inet_client_port</tt> returns the
     port number.
     <tt class="function">inet_server_addr</tt> returns the IP address on which
     the server accepted the current connection, and
     <tt class="function">inet_server_port</tt> returns the port number.
     All these functions return NULL if the current connection is via a
     Unix-domain socket.
   </p>
<a name="id2564350"></a><p>    <tt class="function">version()</tt> returns a string describing the
    <span class="productname">PostgreSQL</span> server's version.
   </p>
<a name="id2564375"></a><p>   <a href="functions-info.html#functions-info-access-table" title="Table 9.40. Access Privilege Inquiry Functions">Table 9.40, &#8220;Access Privilege Inquiry Functions&#8221;</a> lists functions that
   allow the user to query object access privileges programmatically.
   See <a href="ddl-priv.html" title="5.7. Privileges">Section 5.7, &#8220;Privileges&#8221;</a> for more information about
   privileges.
  </p>
<div class="table">
<a name="functions-info-access-table"></a><p class="title"><b>Table 9.40. Access Privilege Inquiry Functions</b></p>
<table summary="Access Privilege Inquiry Functions" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Return Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><tt class="literal"><tt class="function">has_table_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>table</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for table</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_table_privilege</tt>(<i class="parameter"><tt>table</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for table</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_database_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>database</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for database</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_database_privilege</tt>(<i class="parameter"><tt>database</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for database</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_function_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>function</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for function</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_function_privilege</tt>(<i class="parameter"><tt>function</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for function</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_language_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>language</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for language</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_language_privilege</tt>(<i class="parameter"><tt>language</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for language</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_schema_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>schema</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for schema</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_schema_privilege</tt>(<i class="parameter"><tt>schema</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for schema</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_tablespace_privilege</tt>(<i class="parameter"><tt>user</tt></i>,
                                  <i class="parameter"><tt>tablespace</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does user have privilege for tablespace</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">has_tablespace_privilege</tt>(<i class="parameter"><tt>tablespace</tt></i>,
                                  <i class="parameter"><tt>privilege</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>does current user have privilege for tablespace</td>
</tr>
</tbody>
</table>
</div>
<a name="id2564836"></a><a name="id2564845"></a><a name="id2564855"></a><a name="id2564864"></a><a name="id2564874"></a><a name="id2564883"></a><p>    <tt class="function">has_table_privilege</tt> checks whether a user
    can access a table in a particular way.  The user can be
    specified by name or by ID
    (<tt class="literal">pg_user.usesysid</tt>), or if the argument is
    omitted
    <tt class="function">current_user</tt> is assumed.  The table can be specified
    by name or by OID.  (Thus, there are actually six variants of
    <tt class="function">has_table_privilege</tt>, which can be distinguished by
    the number and types of their arguments.)  When specifying by name,
    the name can be schema-qualified if necessary.
    The desired access privilege type
    is specified by a text string, which must evaluate to one of the
    values <tt class="literal">SELECT</tt>, <tt class="literal">INSERT</tt>, <tt class="literal">UPDATE</tt>,
    <tt class="literal">DELETE</tt>, <tt class="literal">RULE</tt>, <tt class="literal">REFERENCES</tt>, or
    <tt class="literal">TRIGGER</tt>.  (Case of the string is not significant, however.)
    An example is:
</p>
<pre class="programlisting">SELECT has_table_privilege('myschema.mytable', 'select');</pre>
<p>
   </p>
<p>    <tt class="function">has_database_privilege</tt> checks whether a user
    can access a database in a particular way.  The possibilities for its
    arguments are analogous to <tt class="function">has_table_privilege</tt>.
    The desired access privilege type must evaluate to
    <tt class="literal">CREATE</tt>,
    <tt class="literal">TEMPORARY</tt>, or
    <tt class="literal">TEMP</tt> (which is equivalent to
    <tt class="literal">TEMPORARY</tt>).
   </p>
<p>    <tt class="function">has_function_privilege</tt> checks whether a user
    can access a function in a particular way.  The possibilities for its
    arguments are analogous to <tt class="function">has_table_privilege</tt>.
    When specifying a function by a text string rather than by OID,
    the allowed input is the same as for the <tt class="type">regprocedure</tt> data type
    (see <a href="datatype-oid.html" title="8.12. Object Identifier Types">Section 8.12, &#8220;Object Identifier Types&#8221;</a>).
    The desired access privilege type must evaluate to
    <tt class="literal">EXECUTE</tt>.
    An example is:
</p>
<pre class="programlisting">SELECT has_function_privilege('joeuser', 'myfunc(int, text)', 'execute');</pre>
<p>
   </p>
<p>    <tt class="function">has_language_privilege</tt> checks whether a user
    can access a procedural language in a particular way.  The possibilities
    for its arguments are analogous to <tt class="function">has_table_privilege</tt>.
    The desired access privilege type must evaluate to
    <tt class="literal">USAGE</tt>.
   </p>
<p>    <tt class="function">has_schema_privilege</tt> checks whether a user
    can access a schema in a particular way.  The possibilities for its
    arguments are analogous to <tt class="function">has_table_privilege</tt>.
    The desired access privilege type must evaluate to
    <tt class="literal">CREATE</tt> or
    <tt class="literal">USAGE</tt>.
   </p>
<p>    <tt class="function">has_tablespace_privilege</tt> checks whether a user
    can access a tablespace in a particular way.  The possibilities for its
    arguments are analogous to <tt class="function">has_table_privilege</tt>.
    The desired access privilege type must evaluate to
    <tt class="literal">CREATE</tt>.
   </p>
<p>   To test whether a user holds a grant option on the privilege,
   append <tt class="literal"> WITH GRANT OPTION</tt> to the privilege key
   word; for example <tt class="literal">'UPDATE WITH GRANT OPTION'</tt>.
  </p>
<p>   <a href="functions-info.html#functions-info-schema-table" title="Table 9.41. Schema Visibility Inquiry Functions">Table 9.41, &#8220;Schema Visibility Inquiry Functions&#8221;</a> shows functions that
   determine whether a certain object is <i class="firstterm">visible</i> in the
   current schema search path.  A table is said to be visible if its
   containing schema is in the search path and no table of the same
   name appears earlier in the search path.  This is equivalent to the
   statement that the table can be referenced by name without explicit
   schema qualification.  For example, to list the names of all
   visible tables:
</p>
<pre class="programlisting">SELECT relname FROM pg_class WHERE pg_table_is_visible(oid);</pre>
<p>
  </p>
<div class="table">
<a name="functions-info-schema-table"></a><p class="title"><b>Table 9.41. Schema Visibility Inquiry Functions</b></p>
<table summary="Schema Visibility Inquiry Functions" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Return Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><tt class="literal"><tt class="function">pg_table_is_visible</tt>(<i class="parameter"><tt>table_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is table visible in search path</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_type_is_visible</tt>(<i class="parameter"><tt>type_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is type (or domain) visible in search path</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_function_is_visible</tt>(<i class="parameter"><tt>function_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is function visible in search path</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_operator_is_visible</tt>(<i class="parameter"><tt>operator_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is operator visible in search path</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_opclass_is_visible</tt>(<i class="parameter"><tt>opclass_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is operator class visible in search path</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_conversion_is_visible</tt>(<i class="parameter"><tt>conversion_oid</tt></i>)</tt></td>
<td><tt class="type">boolean</tt></td>
<td>is conversion visible in search path</td>
</tr>
</tbody>
</table>
</div>
<a name="id2565350"></a><a name="id2565359"></a><a name="id2565368"></a><a name="id2565378"></a><a name="id2565388"></a><a name="id2565397"></a><p>   <tt class="function">pg_table_is_visible</tt> performs the check for
   tables (or views, or any other kind of <tt class="literal">pg_class</tt> entry).
   <tt class="function">pg_type_is_visible</tt>,
   <tt class="function">pg_function_is_visible</tt>,
   <tt class="function">pg_operator_is_visible</tt>,
   <tt class="function">pg_opclass_is_visible</tt>, and
   <tt class="function">pg_conversion_is_visible</tt> perform the same sort of
   visibility check for types (and domains), functions, operators, operator classes
   and conversions, respectively.  For functions and operators, an object in
   the search path is visible if there is no object of the same name
   <span class="emphasis"><em>and argument data type(s)</em></span> earlier in the path.  For
   operator classes, both name and associated index access method are
   considered.
   </p>
<p>    All these functions require object OIDs to identify the object to be
    checked.  If you want to test an object by name, it is convenient to use
    the OID alias types (<tt class="type">regclass</tt>, <tt class="type">regtype</tt>,
    <tt class="type">regprocedure</tt>, or <tt class="type">regoperator</tt>), for example
</p>
<pre class="programlisting">SELECT pg_type_is_visible('myschema.widget'::regtype);</pre>
<p>
    Note that it would not make much sense to test an unqualified name in
    this way [mdash ] if the name can be recognized at all, it must be visible.
   </p>
<a name="id2565492"></a><a name="id2565501"></a><a name="id2565511"></a><a name="id2565520"></a><a name="id2565529"></a><a name="id2565539"></a><a name="id2565548"></a><a name="id2565557"></a><a name="id2565567"></a><p>   <a href="functions-info.html#functions-info-catalog-table" title="Table 9.42. System Catalog Information Functions">Table 9.42, &#8220;System Catalog Information Functions&#8221;</a> lists functions that
   extract information from the system catalogs.
  </p>
<div class="table">
<a name="functions-info-catalog-table"></a><p class="title"><b>Table 9.42. System Catalog Information Functions</b></p>
<table summary="System Catalog Information Functions" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Return Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><tt class="literal"><tt class="function">pg_get_viewdef</tt>(<i class="parameter"><tt>view_name</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE VIEW</tt> command for view (<span class="emphasis"><em>deprecated</em></span>)</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_viewdef</tt>(<i class="parameter"><tt>view_name</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE VIEW</tt> command for view (<span class="emphasis"><em>deprecated</em></span>)</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_viewdef</tt>(<i class="parameter"><tt>view_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE VIEW</tt> command for view</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_viewdef</tt>(<i class="parameter"><tt>view_oid</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE VIEW</tt> command for view</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_ruledef</tt>(<i class="parameter"><tt>rule_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE RULE</tt> command for rule</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_ruledef</tt>(<i class="parameter"><tt>rule_oid</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE RULE</tt> command for rule</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_indexdef</tt>(<i class="parameter"><tt>index_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE INDEX</tt> command for index</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_indexdef</tt>(<i class="parameter"><tt>index_oid</tt></i>, <i class="parameter"><tt>column_no</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE INDEX</tt> command for index,
       or definition of just one index column when
       <i class="parameter"><tt>column_no</tt></i> is not zero</td>
</tr>
<tr>
<td>
<tt class="function">pg_get_triggerdef</tt>(<i class="parameter"><tt>trigger_oid</tt></i>)</td>
<td><tt class="type">text</tt></td>
<td>get <tt class="command">CREATE [ CONSTRAINT ] TRIGGER</tt> command for trigger</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_constraintdef</tt>(<i class="parameter"><tt>constraint_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get definition of a constraint</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_constraintdef</tt>(<i class="parameter"><tt>constraint_oid</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get definition of a constraint</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_expr</tt>(<i class="parameter"><tt>expr_text</tt></i>, <i class="parameter"><tt>relation_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>decompile internal form of an expression, assuming that any Vars
       in it refer to the relation indicated by the second parameter</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_expr</tt>(<i class="parameter"><tt>expr_text</tt></i>, <i class="parameter"><tt>relation_oid</tt></i>, <i class="parameter"><tt>pretty_bool</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>decompile internal form of an expression, assuming that any Vars
       in it refer to the relation indicated by the second parameter</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_userbyid</tt>(<i class="parameter"><tt>userid</tt></i>)</tt></td>
<td><tt class="type">name</tt></td>
<td>get user name with given ID</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_get_serial_sequence</tt>(<i class="parameter"><tt>table_name</tt></i>, <i class="parameter"><tt>column_name</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get name of the sequence that a <tt class="type">serial</tt> or <tt class="type">bigserial</tt> column
       uses</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">pg_tablespace_databases</tt>(<i class="parameter"><tt>tablespace_oid</tt></i>)</tt></td>
<td><tt class="type">setof oid</tt></td>
<td>get set of database OIDs that have objects in the tablespace</td>
</tr>
</tbody>
</table>
</div>
<p>   <tt class="function">pg_get_viewdef</tt>,
   <tt class="function">pg_get_ruledef</tt>,
   <tt class="function">pg_get_indexdef</tt>,
   <tt class="function">pg_get_triggerdef</tt>, and
   <tt class="function">pg_get_constraintdef</tt> respectively
   reconstruct the creating command for a view, rule, index, trigger, or
   constraint.  (Note that this is a decompiled reconstruction, not
   the original text of the command.)
   <tt class="function">pg_get_expr</tt> decompiles the internal form of an
   individual expression, such as the default value for a column.  It
   may be useful when examining the contents of system catalogs.
   Most of these functions come in two
   variants, one of which can optionally &#8220;<span class="quote">pretty-print</span>&#8221; the result.
   The pretty-printed format is more readable, but the default format is more
   likely to be
   interpreted the same way by future versions of <span class="productname">PostgreSQL</span>;
   avoid using pretty-printed output for dump purposes.
   Passing <tt class="literal">false</tt> for the pretty-print parameter yields the
   same result as the variant that does not have the parameter at all.
  </p>
<p>   <tt class="function">pg_get_userbyid</tt>
   extracts a user's name given a user ID number.
   <tt class="function">pg_get_serial_sequence</tt>
   fetches the name of the sequence associated with a serial or
   bigserial column.  The name is suitably formatted
   for passing to the sequence functions (see <a href="functions-sequence.html" title="9.12. Sequence Manipulation Functions">Section 9.12, &#8220;Sequence Manipulation Functions&#8221;</a>).
   NULL is returned if the column does not have a sequence attached.
  </p>
<p>  <tt class="function">pg_tablespace_databases</tt> allows usage examination of a
  tablespace. It will return a set of OIDs of databases that have objects
  stored in the tablespace. If this function returns any row, the
  tablespace is not empty and cannot be dropped. To
  display the specific objects populating the tablespace, you will need
  to connect to the databases identified by 
  <tt class="function">pg_tablespace_databases</tt> and query their
  <tt class="structname">pg_class</tt> catalogs.
  </p>
<a name="id2566233"></a><a name="id2566243"></a><a name="id2566252"></a><p>    The functions shown in <a href="functions-info.html#functions-info-comment-table" title="Table 9.43. Comment Information Functions">Table 9.43, &#8220;Comment Information Functions&#8221;</a> extract comments
    previously stored with the <tt class="command">COMMENT</tt> command.  A
    null value is returned if no comment could be found matching the
    specified parameters.
   </p>
<div class="table">
<a name="functions-info-comment-table"></a><p class="title"><b>Table 9.43. Comment Information Functions</b></p>
<table summary="Comment Information Functions" border="1">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Return Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><tt class="literal"><tt class="function">obj_description</tt>(<i class="parameter"><tt>object_oid</tt></i>, <i class="parameter"><tt>catalog_name</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get comment for a database object</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">obj_description</tt>(<i class="parameter"><tt>object_oid</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get comment for a database object (<span class="emphasis"><em>deprecated</em></span>)</td>
</tr>
<tr>
<td><tt class="literal"><tt class="function">col_description</tt>(<i class="parameter"><tt>table_oid</tt></i>, <i class="parameter"><tt>column_number</tt></i>)</tt></td>
<td><tt class="type">text</tt></td>
<td>get comment for a table column</td>
</tr>
</tbody>
</table>
</div>
<p>    The two-parameter form of <tt class="function">obj_description</tt> returns the
    comment for a database object specified by its OID and the name of the
    containing system catalog.  For example,
    <tt class="literal">obj_description(123456,'pg_class')</tt>
    would retrieve the comment for a table with OID 123456.
    The one-parameter form of <tt class="function">obj_description</tt> requires only
    the object OID.  It is now deprecated since there is no guarantee that
    OIDs are unique across different system catalogs; therefore, the wrong
    comment could be returned.
   </p>
<p>    <tt class="function">col_description</tt> returns the comment for a table column,
    which is specified by the OID of its table and its column number.
    <tt class="function">obj_description</tt> cannot be used for table columns since
    columns do not have OIDs of their own.
   </p>
</div></body>
</html>
