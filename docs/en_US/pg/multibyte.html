<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>20.2. Character Set Support</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="PostgreSQL 8.0.5 Documentation">
<link rel="up" href="charset.html" title="Chapter 20. Localization">
<link rel="prev" href="charset.html" title="Chapter 20. Localization">
<link rel="next" href="maintenance.html" title="Chapter 21. Routine Database Maintenance Tasks">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="multibyte"></a>20.2. Character Set Support</h2></div></div></div>
<a name="id602797"></a><p>   The character set support in <span class="productname">PostgreSQL</span>
   allows you to store text in a variety of character sets, including
   single-byte character sets such as the ISO 8859 series and
   multiple-byte character sets such as <span class="acronym">EUC</span> (Extended Unix
   Code), Unicode, and Mule internal code.  All character sets can be
   used transparently throughout the server.  (If you use extension
   functions from other sources, it depends on whether they wrote
   their code correctly.)  The default character set is selected while
   initializing your <span class="productname">PostgreSQL</span> database
   cluster using <code class="command">initdb</code>.  It can be overridden when you
   create a database using <code class="command">createdb</code> or by using the
   SQL command <code class="command">CREATE DATABASE</code>. So you can have multiple
   databases each with a different character set.
  </p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="multibyte-charset-supported"></a>20.2.1. Supported Character Sets</h3></div></div></div>
<p>     <a href="multibyte.html#charset-table" title="Table 20.1. Server Character Sets">Table 20.1, &#8220;Server Character Sets&#8221;</a> shows the character sets available
     for use in the server.
    </p>
<div class="table">
<a name="charset-table"></a><p class="title"><b>Table 20.1. Server Character Sets</b></p>
<table summary="Server Character Sets" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code class="literal">SQL_ASCII</code></td>
<td><span class="acronym">ASCII</span></td>
</tr>
<tr>
<td><code class="literal">EUC_JP</code></td>
<td>Japanese <span class="acronym">EUC</span>
</td>
</tr>
<tr>
<td><code class="literal">EUC_CN</code></td>
<td>Chinese <span class="acronym">EUC</span>
</td>
</tr>
<tr>
<td><code class="literal">EUC_KR</code></td>
<td>Korean <span class="acronym">EUC</span>
</td>
</tr>
<tr>
<td><code class="literal">JOHAB</code></td>
<td>Korean <span class="acronym">EUC</span> (Hangle base)</td>
</tr>
<tr>
<td><code class="literal">EUC_TW</code></td>
<td>Taiwan <span class="acronym">EUC</span>
</td>
</tr>
<tr>
<td><code class="literal">UNICODE</code></td>
<td>Unicode (<span class="acronym">UTF</span>-8)</td>
</tr>
<tr>
<td><code class="literal">MULE_INTERNAL</code></td>
<td>Mule internal code</td>
</tr>
<tr>
<td><code class="literal">LATIN1</code></td>
<td>ISO 8859-1/<span class="acronym">ECMA</span> 94 (Latin alphabet no.1)</td>
</tr>
<tr>
<td><code class="literal">LATIN2</code></td>
<td>ISO 8859-2/<span class="acronym">ECMA</span> 94 (Latin alphabet no.2)</td>
</tr>
<tr>
<td><code class="literal">LATIN3</code></td>
<td>ISO 8859-3/<span class="acronym">ECMA</span> 94 (Latin alphabet no.3)</td>
</tr>
<tr>
<td><code class="literal">LATIN4</code></td>
<td>ISO 8859-4/<span class="acronym">ECMA</span> 94 (Latin alphabet no.4)</td>
</tr>
<tr>
<td><code class="literal">LATIN5</code></td>
<td>ISO 8859-9/<span class="acronym">ECMA</span> 128 (Latin alphabet no.5)</td>
</tr>
<tr>
<td><code class="literal">LATIN6</code></td>
<td>ISO 8859-10/<span class="acronym">ECMA</span> 144 (Latin alphabet no.6)</td>
</tr>
<tr>
<td><code class="literal">LATIN7</code></td>
<td>ISO 8859-13 (Latin alphabet no.7)</td>
</tr>
<tr>
<td><code class="literal">LATIN8</code></td>
<td>ISO 8859-14 (Latin alphabet no.8)</td>
</tr>
<tr>
<td><code class="literal">LATIN9</code></td>
<td>ISO 8859-15 (Latin alphabet no.9)</td>
</tr>
<tr>
<td><code class="literal">LATIN10</code></td>
<td>ISO 8859-16/<span class="acronym">ASRO</span> SR 14111 (Latin alphabet no.10)</td>
</tr>
<tr>
<td><code class="literal">ISO_8859_5</code></td>
<td>ISO 8859-5/<span class="acronym">ECMA</span> 113 (Latin/Cyrillic)</td>
</tr>
<tr>
<td><code class="literal">ISO_8859_6</code></td>
<td>ISO 8859-6/<span class="acronym">ECMA</span> 114 (Latin/Arabic)</td>
</tr>
<tr>
<td><code class="literal">ISO_8859_7</code></td>
<td>ISO 8859-7/<span class="acronym">ECMA</span> 118 (Latin/Greek)</td>
</tr>
<tr>
<td><code class="literal">ISO_8859_8</code></td>
<td>ISO 8859-8/<span class="acronym">ECMA</span> 121 (Latin/Hebrew)</td>
</tr>
<tr>
<td><code class="literal">KOI8</code></td>
<td>
<span class="acronym">KOI</span>8-R(U)</td>
</tr>
<tr>
<td><code class="literal">ALT</code></td>
<td>Windows CP866</td>
</tr>
<tr>
<td><code class="literal">WIN874</code></td>
<td>Windows CP874 (Thai)</td>
</tr>
<tr>
<td><code class="literal">WIN1250</code></td>
<td>Windows CP1250</td>
</tr>
<tr>
<td><code class="literal">WIN</code></td>
<td>Windows CP1251</td>
</tr>
<tr>
<td><code class="literal">WIN1256</code></td>
<td>Windows CP1256 (Arabic)</td>
</tr>
<tr>
<td><code class="literal">TCVN</code></td>
<td>
<span class="acronym">TCVN</span>-5712/Windows CP1258 (Vietnamese)</td>
</tr>
</tbody>
</table>
</div>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Important</h3>
<p>      Before <span class="productname">PostgreSQL</span> 7.2, <code class="literal">LATIN5</code>
      mistakenly meant ISO 8859-5.  From 7.2 on, <code class="literal">LATIN5</code>
      means ISO 8859-9. If you have a <code class="literal">LATIN5</code> database
      created on 7.1 or earlier and want to migrate to 7.2 or later,
      you should be careful about this change.
     </p>
</div>
<p>      Not all <span class="acronym">API</span>s support all the listed character sets. For example, the
      <span class="productname">PostgreSQL</span>
      JDBC driver does not support <code class="literal">MULE_INTERNAL</code>, <code class="literal">LATIN6</code>,
      <code class="literal">LATIN8</code>, and <code class="literal">LATIN10</code>.
     </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id603347"></a>20.2.2. Setting the Character Set</h3></div></div></div>
<p>     <code class="command">initdb</code> defines the default character set
     for a <span class="productname">PostgreSQL</span> cluster. For example,

</p>
<pre class="screen">initdb -E EUC_JP</pre>
<p>

     sets the default character set (encoding) to
     <code class="literal">EUC_JP</code> (Extended Unix Code for Japanese).  You
     can use <code class="option">--encoding</code> instead of
     <code class="option">-E</code> if you prefer to type longer option strings.
     If no <code class="option">-E</code> or <code class="option">--encoding</code> option is
     given, <code class="literal">SQL_ASCII</code> is used.
    </p>
<p>     You can create a database with a different character set:

</p>
<pre class="screen">createdb -E EUC_KR korean</pre>
<p>

     This will create a database named <code class="literal">korean</code> that
     uses the character set <code class="literal">EUC_KR</code>.  Another way to
     accomplish this is to use this SQL command:

</p>
<pre class="programlisting">CREATE DATABASE korean WITH ENCODING 'EUC_KR';</pre>
<p>

     The encoding for a database is stored in the system catalog
     <code class="literal">pg_database</code>.  You can see that by using the
     <code class="option">-l</code> option or the <code class="command">\l</code> command
     of <code class="command">psql</code>.

</p>
<pre class="screen">$ <strong class="userinput"><code>psql -l</code></strong>
            List of databases
   Database    |  Owner  |   Encoding    
---------------+---------+---------------
 euc_cn        | t-ishii | EUC_CN
 euc_jp        | t-ishii | EUC_JP
 euc_kr        | t-ishii | EUC_KR
 euc_tw        | t-ishii | EUC_TW
 mule_internal | t-ishii | MULE_INTERNAL
 regression    | t-ishii | SQL_ASCII
 template1     | t-ishii | EUC_JP
 test          | t-ishii | EUC_JP
 unicode       | t-ishii | UNICODE
(9 rows)</pre>
<p>
    </p>
<div class="important" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Important</h3>
<p>      Although you can specify any encoding you want for a database, it is
      unwise to choose an encoding that is not what is expected by the locale
      you have selected.  The <code class="literal">LC_COLLATE</code> and
      <code class="literal">LC_CTYPE</code> settings imply a particular encoding,
      and locale-dependent operations (such as sorting) are likely to
      misinterpret data that is in an incompatible encoding.
     </p>
<p>      Since these locale settings are frozen by <code class="command">initdb</code>, the
      apparent flexibility to use different encodings in different databases
      of a cluster is more theoretical than real.  It is likely that these
      mechanisms will be revisited in future versions of
      <span class="productname">PostgreSQL</span>.
     </p>
<p>      One way to use multiple encodings safely is to set the locale to
      <code class="literal">C</code> or <code class="literal">POSIX</code> during <code class="command">initdb</code>, thus
      disabling any real locale awareness.
     </p>
</div>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id603554"></a>20.2.3. Automatic Character Set Conversion Between Server and Client</h3></div></div></div>
<p>     <span class="productname">PostgreSQL</span> supports automatic
     character set conversion between server and client for certain
     character sets. The conversion information is stored in the
     <code class="literal">pg_conversion</code> system catalog. You can create a new
     conversion by using the SQL command <code class="command">CREATE
     CONVERSION</code>. <span class="productname">PostgreSQL</span> comes with some
     predefined conversions. They are listed in <a href="multibyte.html#multibyte-translation-table" title="Table 20.2. Client/Server Character Set Conversions">Table 20.2, &#8220;Client/Server Character Set Conversions&#8221;</a>.
    </p>
<div class="table">
<a name="multibyte-translation-table"></a><p class="title"><b>Table 20.2. Client/Server Character Set Conversions</b></p>
<table summary="Client/Server Character Set Conversions" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Server Character Set</th>
<th>Available Client Character Sets</th>
</tr></thead>
<tbody>
<tr>
<td><code class="literal">SQL_ASCII</code></td>
<td>
<code class="literal">SQL_ASCII</code>, <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">EUC_JP</code></td>
<td>
<code class="literal">EUC_JP</code>, <code class="literal">SJIS</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">EUC_CN</code></td>
<td>
<code class="literal">EUC_CN</code>, <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">EUC_KR</code></td>
<td>
<code class="literal">EUC_KR</code>, <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">JOHAB</code></td>
<td>
<code class="literal">JOHAB</code>, <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">EUC_TW</code></td>
<td>
<code class="literal">EUC_TW</code>, <code class="literal">BIG5</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN1</code></td>
<td>
<code class="literal">LATIN1</code>, <code class="literal">UNICODE</code>
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN2</code></td>
<td>
<code class="literal">LATIN2</code>, <code class="literal">WIN1250</code>,
         <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN3</code></td>
<td>
<code class="literal">LATIN3</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN4</code></td>
<td>
<code class="literal">LATIN4</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN5</code></td>
<td>
<code class="literal">LATIN5</code>, <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN6</code></td>
<td>
<code class="literal">LATIN6</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN7</code></td>
<td>
<code class="literal">LATIN7</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN8</code></td>
<td>
<code class="literal">LATIN8</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN9</code></td>
<td>
<code class="literal">LATIN9</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">LATIN10</code></td>
<td>
<code class="literal">LATIN10</code>, <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">ISO_8859_5</code></td>
<td>
<code class="literal">ISO_8859_5</code>,
         <code class="literal">UNICODE</code>,
         <code class="literal">MULE_INTERNAL</code>,
         <code class="literal">WIN</code>,
         <code class="literal">ALT</code>,
         <code class="literal">KOI8</code>
         </td>
</tr>
<tr>
<td><code class="literal">ISO_8859_6</code></td>
<td>
<code class="literal">ISO_8859_6</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">ISO_8859_7</code></td>
<td>
<code class="literal">ISO_8859_7</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">ISO_8859_8</code></td>
<td>
<code class="literal">ISO_8859_8</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">UNICODE</code></td>
<td>         <code class="literal">EUC_JP</code>, <code class="literal">SJIS</code>, 
         <code class="literal">EUC_KR</code>, <code class="literal">UHC</code>, <code class="literal">JOHAB</code>,
         <code class="literal">EUC_CN</code>, <code class="literal">GBK</code>,
         <code class="literal">EUC_TW</code>, <code class="literal">BIG5</code>, 
         <code class="literal">LATIN1</code> to <code class="literal">LATIN10</code>, 
         <code class="literal">ISO_8859_5</code>, 
         <code class="literal">ISO_8859_6</code>,
         <code class="literal">ISO_8859_7</code>, 
         <code class="literal">ISO_8859_8</code>, 
         <code class="literal">WIN</code>, <code class="literal">ALT</code>, 
         <code class="literal">KOI8</code>, 
         <code class="literal">WIN1256</code>,
         <code class="literal">TCVN</code>,
         <code class="literal">WIN874</code>,
         <code class="literal">GB18030</code>,
         <code class="literal">WIN1250</code>
         </td>
</tr>
<tr>
<td><code class="literal">MULE_INTERNAL</code></td>
<td>
<code class="literal">EUC_JP</code>, <code class="literal">SJIS</code>, <code class="literal">EUC_KR</code>, <code class="literal">EUC_CN</code>, 
          <code class="literal">EUC_TW</code>, <code class="literal">BIG5</code>, <code class="literal">LATIN1</code> to <code class="literal">LATIN5</code>, 
          <code class="literal">WIN</code>, <code class="literal">ALT</code>,
         <code class="literal">WIN1250</code>,
          <code class="literal">BIG5</code>, <code class="literal">ISO_8859_5</code>, <code class="literal">KOI8</code>
</td>
</tr>
<tr>
<td><code class="literal">KOI8</code></td>
<td>
<code class="literal">ISO_8859_5</code>, <code class="literal">WIN</code>, 
         <code class="literal">ALT</code>, <code class="literal">KOI8</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">ALT</code></td>
<td>
<code class="literal">ISO_8859_5</code>, <code class="literal">WIN</code>, 
         <code class="literal">ALT</code>, <code class="literal">KOI8</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">WIN874</code></td>
<td>
<code class="literal">WIN874</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">WIN1250</code></td>
<td>
<code class="literal">LATIN2</code>, <code class="literal">WIN1250</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">WIN</code></td>
<td>
<code class="literal">ISO_8859_5</code>, <code class="literal">WIN</code>, 
         <code class="literal">ALT</code>, <code class="literal">KOI8</code>,
         <code class="literal">UNICODE</code>, <code class="literal">MULE_INTERNAL</code>
         </td>
</tr>
<tr>
<td><code class="literal">WIN1256</code></td>
<td>
<code class="literal">WIN1256</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
<tr>
<td><code class="literal">TCVN</code></td>
<td>
<code class="literal">TCVN</code>,
         <code class="literal">UNICODE</code>
         </td>
</tr>
</tbody>
</table>
</div>
<p>     To enable the automatic character set conversion, you have to
     tell <span class="productname">PostgreSQL</span> the character set
     (encoding) you would like to use in the client. There are several
     ways to accomplish this:

     </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>        Using the <code class="command">\encoding</code> command in
        <span class="application">psql</span>.
        <code class="command">\encoding</code> allows you to change client
        encoding on the fly. For
        example, to change the encoding to <code class="literal">SJIS</code>, type:

</p>
<pre class="programlisting">\encoding SJIS</pre>
<p>
       </p>
</li>
<li>
<p>        Using <span class="application">libpq</span> functions.
        <code class="command">\encoding</code> actually calls
        <code class="function">PQsetClientEncoding()</code> for its purpose.

</p>
<pre class="synopsis">int PQsetClientEncoding(PGconn *<em class="replaceable"><code>conn</code></em>, const char *<em class="replaceable"><code>encoding</code></em>);</pre>
<p>

        where <em class="replaceable"><code>conn</code></em> is a connection to the server,
        and <em class="replaceable"><code>encoding</code></em> is the encoding you
        want to use. If the function successfully sets the encoding, it returns 0,
        otherwise -1. The current encoding for this connection can be determined by
        using:

</p>
<pre class="synopsis">int PQclientEncoding(const PGconn *<em class="replaceable"><code>conn</code></em>);</pre>
<p>

        Note that it returns the encoding ID, not a symbolic string
        such as <code class="literal">EUC_JP</code>. To convert an encoding ID to an encoding name, you
        can use:

</p>
<pre class="synopsis">char *pg_encoding_to_char(int <em class="replaceable"><code>encoding_id</code></em>);</pre>
<p>
       </p>
</li>
<li>
<p>        Using <code class="command">SET client_encoding TO</code>.

        Setting the client encoding can be done with this SQL command:

</p>
<pre class="programlisting">SET CLIENT_ENCODING TO '<em class="replaceable"><code>value</code></em>';</pre>
<p>

        Also you can use the more standard SQL syntax <code class="literal">SET NAMES</code> for this purpose:

</p>
<pre class="programlisting">SET NAMES '<em class="replaceable"><code>value</code></em>';</pre>
<p>

        To query the current client encoding:

</p>
<pre class="programlisting">SHOW client_encoding;</pre>
<p>

        To return to the default encoding:

</p>
<pre class="programlisting">RESET client_encoding;</pre>
<p>
       </p>
</li>
<li><p>        Using <code class="envar">PGCLIENTENCODING</code>. If the environment variable
        <code class="envar">PGCLIENTENCODING</code> is defined in the client's
        environment, that client encoding is automatically selected
        when a connection to the server is made.  (This can
        subsequently be overridden using any of the other methods
        mentioned above.)
       </p></li>
<li><p>       Using the configuration variable <a href="runtime-config.html#guc-client-encoding">client_encoding</a>. If the
       <code class="varname">client_encoding</code> variable is set, that client
       encoding is automatically selected when a connection to the
       server is made.  (This can subsequently be overridden using any
       of the other methods mentioned above.)
       </p></li>
</ul></div>
<p>
    </p>
<p>     If the conversion of a particular character is not possible
     [mdash ] suppose you chose <code class="literal">EUC_JP</code> for the
     server and <code class="literal">LATIN1</code> for the client, then some
     Japanese characters cannot be converted to
     <code class="literal">LATIN1</code> [mdash ] it is transformed to its
     hexadecimal byte values in parentheses, e.g.,
     <code class="literal">(826C)</code>.
    </p>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id604949"></a>20.2.4. Further Reading</h3></div></div></div>
<p>     These are good sources to start learning about various kinds of encoding
     systems.

     </p>
<div class="variablelist"><dl>
<dt><span class="term"><a href="ftp://ftp.ora.com/pub/examples/nutshell/ujip/doc/cjk.inf" target="_top">ftp://ftp.ora.com/pub/examples/nutshell/ujip/doc/cjk.inf</a></span></dt>
<dd><p>         Detailed explanations of <code class="literal">EUC_JP</code>,
         <code class="literal">EUC_CN</code>, <code class="literal">EUC_KR</code>,
         <code class="literal">EUC_TW</code> appear in section 3.2.
        </p></dd>
<dt><span class="term"><a href="http://www.unicode.org/" target="_top">http://www.unicode.org/</a></span></dt>
<dd><p>         The web site of the Unicode Consortium
        </p></dd>
<dt><span class="term">RFC 2044</span></dt>
<dd><p>         <span class="acronym">UTF</span>-8 is defined here.
        </p></dd>
</dl></div>
<p>
    </p>
</div>
</div></body>
</html>
