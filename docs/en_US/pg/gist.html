<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>GiST Indexes</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 7.4beta4 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Internals"
HREF="internals.html"><LINK
REL="PREVIOUS"
TITLE="Further Readings"
HREF="geqo-biblio.html"><LINK
REL="NEXT"
TITLE="BKI Backend Interface"
HREF="bki.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
NAME="creation"
CONTENT="2003-10-03T03:19:47"></HEAD
><BODY
CLASS="CHAPTER"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
>PostgreSQL 7.4beta4 Documentation</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="geqo-biblio.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="geqo.html"
>Fast Backward</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="bki.html"
>Fast Forward</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="bki.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="GIST"
></A
>Chapter 48. GiST Indexes</H1
><P
>The information about GIST is at
 <A
HREF="http://GiST.CS.Berkeley.EDU:8000/gist/"
TARGET="_top"
>http://GiST.CS.Berkeley.EDU:8000/gist/</A
>

with more on different indexing and sorting schemes at
<A
HREF="http://s2k-ftp.CS.Berkeley.EDU:8000/personal/jmh/"
TARGET="_top"
>http://s2k-ftp.CS.Berkeley.EDU:8000/personal/jmh/</A
>.

And there is more interesting reading at
<A
HREF="http://epoch.cs.berkeley.edu:8000/"
TARGET="_top"
>http://epoch.cs.berkeley.edu:8000/</A
> and
<A
HREF="http://www.sai.msu.su/~megera/postgres/gist/"
TARGET="_top"
>http://www.sai.msu.su/~megera/postgres/gist/</A
>.</P
><P
></P><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Author: </B
>This extraction from an email sent by 
Eugene Selkov, Jr. (<CODE
CLASS="EMAIL"
>&#60;<A
HREF="mailto:selkovjr@mcs.anl.gov"
>selkovjr@mcs.anl.gov</A
>&#62;</CODE
>)
contains good information
on GiST. Hopefully we will learn more in the future and update this information.
- thomas 1998-03-01</P
></BLOCKQUOTE
></DIV
><P></P
><P
>Well, I can't say I quite understand what's going on, but at least
I (almost) succeeded in porting GiST examples to linux. The GiST access
method is already in the postgres tree (<TT
CLASS="FILENAME"
>src/backend/access/gist</TT
>).</P
><P
><A
HREF="ftp://s2k-ftp.cs.berkeley.edu/pub/gist/pggist/pggist.tgz"
TARGET="_top"
>Examples at Berkeley</A
>
come with an overview of the methods and demonstrate spatial index 
mechanisms for 2D boxes, polygons, integer intervals and text
(see also <A
HREF="http://gist.cs.berkeley.edu:8000/gist/"
TARGET="_top"
>GiST at Berkeley</A
>).
In the box example, we
are supposed to see a performance gain when using the GiST index; it did
work for me but I do not have a reasonably large collection of boxes
to check that. Other examples also worked, except polygons: I got an 
error doing

</P><PRE
CLASS="PROGRAMLISTING"
>test=&#62; CREATE INDEX pix ON polytmp
test-&#62; USING GIST (p:box gist_poly_ops) WITH (ISLOSSY);
ERROR:  cannot open pix

(PostgreSQL 6.3               Sun Feb  1 14:57:30 EST 1998)</PRE
><P></P
><P
>I could not get sense of this error message; it appears to be something
we'd rather ask the developers about (see also Note 4 below). What I
would suggest here is that someone of you linux guys (linux==gcc?) fetch the 
original sources quoted above and apply my patch (see attachment) and 
tell us what you feel about it. Looks cool to me, but I would not like 
to hold it up while there are so many competent people around.</P
><P
>A few notes on the sources:</P
><P
>1. I failed to make use of the original (HP-UX) Makefile and rearranged
   the Makefile from the ancient postgres95 tutorial to do the job. I tried
   to keep it generic, but I am a very poor makefile writer -- just did
   some monkey work. Sorry about that, but I guess it is now a little
   more portable that the original makefile.</P
><P
>2. I built the example sources right under pgsql/src (just extracted the
   tar file there). The aforementioned Makefile assumes it is one level
   below pgsql/src (in our case, in pgsql/src/pggist).</P
><P
>3. The changes I made to the *.c files were all about #include's,
   function prototypes and typecasting. Other than that, I just threw 
   away a bunch of unused vars and added a couple parentheses to please
   gcc. I hope I did not screw up too much :)</P
><P
>4. There is a comment in polyproc.sql:

</P><PRE
CLASS="PROGRAMLISTING"
>-- -- there's a memory leak in rtree poly_ops!!
-- -- CREATE INDEX pix2 ON polytmp USING RTREE (p poly_ops);</PRE
><P>

   Roger that!! I thought it could be related to a number of
   <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> versions
   back and tried the query. My system went nuts and I had to shoot down
   the postmaster in about ten minutes.</P
><P
>I will continue to look into GiST for a while, but I would also
appreciate
more examples of R-tree usage.</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="geqo-biblio.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="bki.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Further Readings</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="internals.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><ACRONYM
CLASS="ACRONYM"
>BKI</ACRONYM
> Backend Interface</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>