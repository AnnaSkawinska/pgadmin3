<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>CREATE OPERATOR</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.1devel Documentation">
<link rel="up" href="sql-commands.html" title="SQL Commands">
<link rel="previous" href="sql-createlanguage.html" title="CREATE LANGUAGE">
<link rel="next" href="sql-createopclass.html" title="CREATE OPERATOR CLASS">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="sql-createoperator"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv">
<h2>Name</h2>
<p>CREATE OPERATOR &#8212; define a new operator</p>
</div>
<a name="id2677642"></a><div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">CREATE OPERATOR <i class="replaceable"><tt>name</tt></i> (
    PROCEDURE = <i class="replaceable"><tt>funcname</tt></i>
    [, LEFTARG = <i class="replaceable"><tt>lefttype</tt></i> ] [, RIGHTARG = <i class="replaceable"><tt>righttype</tt></i> ]
    [, COMMUTATOR = <i class="replaceable"><tt>com_op</tt></i> ] [, NEGATOR = <i class="replaceable"><tt>neg_op</tt></i> ]
    [, RESTRICT = <i class="replaceable"><tt>res_proc</tt></i> ] [, JOIN = <i class="replaceable"><tt>join_proc</tt></i> ]
    [, HASHES ] [, MERGES ]
    [, SORT1 = <i class="replaceable"><tt>left_sort_op</tt></i> ] [, SORT2 = <i class="replaceable"><tt>right_sort_op</tt></i> ]
    [, LTCMP = <i class="replaceable"><tt>less_than_op</tt></i> ] [, GTCMP = <i class="replaceable"><tt>greater_than_op</tt></i> ]
)</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2677730"></a><h2>Description</h2>
<p>   <tt class="command">CREATE OPERATOR</tt> defines a new operator,
   <i class="replaceable"><tt>name</tt></i>.  The user who
   defines an operator becomes its owner.  If a schema name is given
   then the operator is created in the specified schema.  Otherwise it
   is created in the current schema.
  </p>
<p>   The operator name is a sequence of up to <tt class="symbol">NAMEDATALEN</tt>-1
   (63 by default) characters from the following list:
</p>
<div class="literallayout"><p>+ - * / &lt; &gt; = ~ ! @ # % ^ &amp; | ` ?</p></div>
<p>

   There are a few restrictions on your choice of name:
   </p>
<div class="itemizedlist"><ul type="disc">
<li><p>     <tt class="literal">--</tt> and <tt class="literal">/*</tt> cannot appear anywhere in an operator name,
     since they will be taken as the start of a comment.
     </p></li>
<li>
<p>     A multicharacter operator name cannot end in <tt class="literal">+</tt> or
     <tt class="literal">-</tt>,
     unless the name also contains at least one of these characters:
</p>
<div class="literallayout"><p>~ ! @ # % ^ &amp; | ` ?</p></div>
<p>
     For example, <tt class="literal">@-</tt> is an allowed operator name,
     but <tt class="literal">*-</tt> is not.
     This restriction allows <span class="productname">PostgreSQL</span> to
     parse SQL-compliant commands without requiring spaces between tokens.
     </p>
</li>
</ul></div>
<p>
  </p>
<p>   The operator <tt class="literal">!=</tt> is mapped to
   <tt class="literal">&lt;&gt;</tt> on input, so these two names are always
   equivalent.
  </p>
<p>   At least one of <tt class="literal">LEFTARG</tt> and <tt class="literal">RIGHTARG</tt> must be defined.  For
   binary operators, both must be defined. For right  unary
   operators, only <tt class="literal">LEFTARG</tt> should be defined, while for left
   unary operators only <tt class="literal">RIGHTARG</tt> should be defined.
  </p>
<p>   The <i class="replaceable"><tt>funcname</tt></i>
   procedure must have been previously defined using <tt class="command">CREATE
   FUNCTION</tt> and must be defined to accept the correct number
   of arguments (either one or two) of the indicated types.
  </p>
<p>   The other clauses specify optional operator optimization clauses.
   Their meaning is detailed in <a href="xoper-optimization.html" title="31.13. Operator Optimization Information">Section 31.13, &#8220;Operator Optimization Information&#8221;</a>.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2677906"></a><h2>Parameters</h2>
<div class="variablelist"><dl>
<dt><span class="term"><i class="replaceable"><tt>name</tt></i></span></dt>
<dd><p>        The name of the operator to be defined. See above for allowable
        characters.  The name may be schema-qualified, for example
        <tt class="literal">CREATE OPERATOR myschema.+ (...)</tt>.  If not, then
        the operator is created in the current schema.  Two operators
        in the same schema can have the same name if they operate on
        different data types.  This is called
        <i class="firstterm">overloading</i>.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>funcname</tt></i></span></dt>
<dd><p>        The function used to implement this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>lefttype</tt></i></span></dt>
<dd><p>        The data type of the operator's left operand, if any.
        This option would be omitted for a left-unary operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>righttype</tt></i></span></dt>
<dd><p>        The data type of the operator's right operand, if any.
        This option would be omitted for a right-unary operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>com_op</tt></i></span></dt>
<dd><p>        The commutator of this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>neg_op</tt></i></span></dt>
<dd><p>        The negator of this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>res_proc</tt></i></span></dt>
<dd><p>        The restriction selectivity estimator function for this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>join_proc</tt></i></span></dt>
<dd><p>        The join selectivity estimator function for this operator.
       </p></dd>
<dt><span class="term"><tt class="literal">HASHES</tt></span></dt>
<dd><p>       Indicates this operator can support a hash join.
       </p></dd>
<dt><span class="term"><tt class="literal">MERGES</tt></span></dt>
<dd><p>       Indicates this operator can support a merge join.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>left_sort_op</tt></i></span></dt>
<dd><p>        If this operator can support a merge join, the less-than
        operator that sorts the left-hand data type of this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>right_sort_op</tt></i></span></dt>
<dd><p>        If this operator can support a merge join, the less-than
        operator that sorts the right-hand data type of this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>less_than_op</tt></i></span></dt>
<dd><p>        If this operator can support a merge join, the less-than
        operator that compares the input data types of this operator.
       </p></dd>
<dt><span class="term"><i class="replaceable"><tt>greater_than_op</tt></i></span></dt>
<dd><p>        If this operator can support a merge join, the greater-than
        operator that compares the input data types of this operator.
       </p></dd>
</dl></div>
<p>   To give a schema-qualified operator name in <i class="replaceable"><tt>com_op</tt></i> or the other optional
   arguments, use the <tt class="literal">OPERATOR()</tt> syntax, for example
</p>
<pre class="programlisting">COMMUTATOR = OPERATOR(myschema.===) ,</pre>
<p>  
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2678113"></a><h2>Notes</h2>
<p>   Refer to <a href="xoper.html" title="31.12. User-Defined Operators">Section 31.12, &#8220;User-Defined Operators&#8221;</a> for further information.
  </p>
<p>   Use <a href="sql-dropoperator.html">DROP OPERATOR</a> to delete user-defined operators
   from a database.  Use <a href="sql-alteroperator.html">ALTER OPERATOR</a> to modify operators in a
   database.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2678150"></a><h2>Examples</h2>
<p>   The following command defines a new operator, area-equality, for
   the data type <tt class="type">box</tt>:
</p>
<pre class="programlisting">CREATE OPERATOR === (
    LEFTARG = box,
    RIGHTARG = box,
    PROCEDURE = area_equal_procedure,
    COMMUTATOR = ===,
    NEGATOR = !==,
    RESTRICT = area_restriction_procedure,
    JOIN = area_join_procedure,
    HASHES,
    SORT1 = &lt;&lt;&lt;,
    SORT2 = &lt;&lt;&lt;
    -- Since sort operators were given, MERGES is implied.
    -- LTCMP and GTCMP are assumed to be &lt; and &gt; respectively
);</pre>
<p>  
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2678174"></a><h2>Compatibility</h2>
<p>   <tt class="command">CREATE OPERATOR</tt> is a
   <span class="productname">PostgreSQL</span> extension.  There are no
   provisions for user-defined operators in the SQL standard.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2678193"></a><h2>See Also</h2>
<span class="simplelist"><a href="sql-alteroperator.html">ALTER OPERATOR</a>, <a href="sql-createopclass.html">CREATE OPERATOR CLASS</a>, <a href="sql-dropoperator.html">DROP OPERATOR</a></span>
</div>
</div></body>
</html>
