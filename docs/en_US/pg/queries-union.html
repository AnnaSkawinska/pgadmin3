<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>7.4. Combining Queries</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.0.2 Documentation">
<link rel="up" href="queries.html" title="Chapter 7. Queries">
<link rel="previous" href="queries-select-lists.html" title="7.3. Select Lists">
<link rel="next" href="queries-order.html" title="7.5. Sorting Rows">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage">
<div><div><h2 class="title" style="clear: both">
<a name="queries-union"></a>7.4. Combining Queries</h2></div></div>
<div></div>
</div>
<a name="id2530489"></a><a name="id2530499"></a><a name="id2530508"></a><a name="id2530518"></a><a name="id2530527"></a><a name="id2530536"></a><a name="id2530545"></a><p>   The results of two queries can be combined using the set operations
   union, intersection, and difference.  The syntax is
</p>
<pre class="synopsis"><i class="replaceable"><tt>query1</tt></i> UNION [<span class="optional">ALL</span>] <i class="replaceable"><tt>query2</tt></i>
<i class="replaceable"><tt>query1</tt></i> INTERSECT [<span class="optional">ALL</span>] <i class="replaceable"><tt>query2</tt></i>
<i class="replaceable"><tt>query1</tt></i> EXCEPT [<span class="optional">ALL</span>] <i class="replaceable"><tt>query2</tt></i></pre>
<p>
   <i class="replaceable"><tt>query1</tt></i> and
   <i class="replaceable"><tt>query2</tt></i> are queries that can use any of
   the features discussed up to this point.  Set operations can also
   be nested and chained, for example
</p>
<pre class="synopsis"><i class="replaceable"><tt>query1</tt></i> UNION <i class="replaceable"><tt>query2</tt></i> UNION <i class="replaceable"><tt>query3</tt></i></pre>
<p>
   which really says
</p>
<pre class="synopsis">(<i class="replaceable"><tt>query1</tt></i> UNION <i class="replaceable"><tt>query2</tt></i>) UNION <i class="replaceable"><tt>query3</tt></i></pre>
<p>
  </p>
<p>   <tt class="literal">UNION</tt> effectively appends the result of
   <i class="replaceable"><tt>query2</tt></i> to the result of
   <i class="replaceable"><tt>query1</tt></i> (although there is no guarantee
   that this is the order in which the rows are actually returned).
   Furthermore, it eliminates duplicate rows from its result, in the same
   way as <tt class="literal">DISTINCT</tt>, unless <tt class="literal">UNION ALL</tt> is used.
  </p>
<p>   <tt class="literal">INTERSECT</tt> returns all rows that are both in the result
   of <i class="replaceable"><tt>query1</tt></i> and in the result of
   <i class="replaceable"><tt>query2</tt></i>.  Duplicate rows are eliminated
   unless <tt class="literal">INTERSECT ALL</tt> is used.
  </p>
<p>   <tt class="literal">EXCEPT</tt> returns all rows that are in the result of
   <i class="replaceable"><tt>query1</tt></i> but not in the result of
   <i class="replaceable"><tt>query2</tt></i>.  (This is sometimes called the
   <i class="firstterm">difference</i> between two queries.)  Again, duplicates
   are eliminated unless <tt class="literal">EXCEPT ALL</tt> is used.
  </p>
<p>   In order to calculate the union, intersection, or difference of two
   queries, the two queries must be &#8220;<span class="quote">union compatible</span>&#8221;,
   which means that they return the same number of columns and
   the corresponding columns have compatible data types, as
   described in <a href="typeconv-union-case.html" title="10.5. UNION, CASE, and ARRAY Constructs">Section 10.5, &#8220;UNION, CASE, and ARRAY Constructs&#8221;</a>.
  </p>
</div></body>
</html>
