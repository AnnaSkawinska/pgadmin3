<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>LISTEN</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.64.1">
<link rel="home" href="index.html" title="PostgreSQL 8.1devel Documentation">
<link rel="up" href="sql-commands.html" title="SQL Commands">
<link rel="previous" href="sql-insert.html" title="INSERT">
<link rel="next" href="sql-load.html" title="LOAD">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="sql-listen"></a><div class="titlepage">
<div></div>
<div></div>
</div>
<div class="refnamediv">
<h2>Name</h2>
<p>LISTEN &#8212; listen for a notification</p>
</div>
<a name="id2693605"></a><div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">LISTEN <i class="replaceable"><tt>name</tt></i></pre>
</div>
<div class="refsect1" lang="en">
<a name="id2693626"></a><h2>Description</h2>
<p>   <tt class="command">LISTEN</tt> registers the current session as a
   listener on the notification condition <i class="replaceable"><tt>name</tt></i>.
   If the current session is already registered as a listener for
   this notification condition, nothing is done.
  </p>
<p>   Whenever the command <tt class="command">NOTIFY <i class="replaceable"><tt>name</tt></i></tt> is invoked, either
   by this session or another one connected to the same database, all
   the sessions currently listening on that notification condition are
   notified, and each will in turn notify its connected client
   application.  See the discussion of <tt class="command">NOTIFY</tt> for
   more information.
  </p>
<p>   A session can be unregistered for a given notify condition with the
   <tt class="command">UNLISTEN</tt> command.  A session's listen
   registrations are automatically cleared when the session ends.
  </p>
<p>   The method a client application must use to detect notification events depends on
   which <span class="productname">PostgreSQL</span> application programming interface it
   uses.  With the <span class="application">libpq</span> library, the application issues
   <tt class="command">LISTEN</tt> as an ordinary SQL command, and then must
   periodically call the function <tt class="function">PQnotifies</tt> to find out
   whether any notification events have been received.  Other interfaces such as
   <span class="application">libpgtcl</span> provide higher-level methods for handling notify events; indeed,
   with <span class="application">libpgtcl</span> the application programmer should not even issue
   <tt class="command">LISTEN</tt> or <tt class="command">UNLISTEN</tt> directly.  See the
   documentation for the interface you are using for more details.
  </p>
<p>   <a href="sql-notify.html">NOTIFY</a>
   contains a more extensive
   discussion of the use of <tt class="command">LISTEN</tt> and
   <tt class="command">NOTIFY</tt>.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2693767"></a><h2>Parameters</h2>
<div class="variablelist"><dl>
<dt><span class="term"><i class="replaceable"><tt>name</tt></i></span></dt>
<dd><p>      Name of a notify condition (any identifier).
     </p></dd>
</dl></div>
</div>
<div class="refsect1" lang="en">
<a name="id2693783"></a><h2>Examples</h2>
<p>   Configure and execute a listen/notify sequence from
   <span class="application">psql</span>:

</p>
<pre class="programlisting">LISTEN virtual;
NOTIFY virtual;
Asynchronous notification "virtual" received from server process with PID 8448.</pre>
<p>
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2693803"></a><h2>Compatibility</h2>
<p>   There is no <tt class="command">LISTEN</tt> statement in the SQL
   standard.
  </p>
</div>
<div class="refsect1" lang="en">
<a name="id2693815"></a><h2>See Also</h2>
<span class="simplelist"><a href="sql-notify.html">NOTIFY</a>, <a href="sql-unlisten.html">UNLISTEN</a></span>
</div>
</div></body>
</html>
