<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>SET ADD TABLE</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Slony-I HEAD_20051214 Documentation">
<link rel="up" href="cmds.html" title="Configuration and Action commmands">
<link rel="prev" href="stmtmergeset.html" title="MERGE
     SET">
<link rel="next" href="stmtsetaddsequence.html" title="SET ADD SEQUENCE">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="refentry" lang="en">
<a name="stmtsetaddtable"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2>Name</h2>
<p>SET ADD TABLE &#8212;  Add a table to a <span class="productname">Slony-I</span>
    replication set </p>
</div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<div class="cmdsynopsis"><p><code class="command">SET ADD TABLE (options);</code></p></div>
</div>
<div class="refsect1" lang="en">
<a name="id536935"></a><h2>Description</h2>
<p> Add an existing user table to a replication set. The set
    cannot currently be subscribed by any other node - that
    functionality is supported by the <a href="stmtmergeset.html" title="MERGE
     SET"><span class="refentrytitle">MERGE
     SET</span></a>
    command.
     
     </p>
<div class="variablelist"><dl>
<dt><span class="term"><code class="literal"> SET ID = ival </code></span></dt>
<dd><p> ID of the set to which the table is to be added. </p></dd>
<dt><span class="term"><code class="literal"> ORIGIN = ival </code></span></dt>
<dd><p> Origin node for the set.  A future version of <span class="application">slonik</span>
	 might figure out this information by itself.</p></dd>
<dt><span class="term"><code class="literal"> ID = ival </code></span></dt>
<dd>
<p> Unique ID of the table. These ID's are not
	 only used to uniquely identify the individual table within the
	 replication system. The numeric value of this ID also
	 determines the order in which the tables are locked in a <a href="stmtlockset.html" title="LOCK SET"><span class="refentrytitle">LOCK SET</span></a> command for example. So
	 these numbers should represent any applicable table hierarchy
	 to make sure the <span class="application">slonik</span> command
	 scripts do not deadlock at any critical
	 moment.</p>
<p> This ID must be unique across all sets; you cannot
         have two tables in the same cluster with the same
         ID. </p>
</dd>
<dt><span class="term"><code class="literal"> FULLY QUALIFIED NAME = 'string' </code></span></dt>
<dd><p> The full table name as described in
	 <a href="stmttableaddkey.html" title="TABLE ADD KEY"><span class="refentrytitle">TABLE ADD KEY</span></a>.</p></dd>
<dt><span class="term"><code class="literal"> KEY = { 'string' | SERIAL }
	</code></span></dt>
<dd><p>	 <span class="emphasis"><em>(Optional)</em></span> The index name that covers the
	 unique and not null column set to be used as the row identifier
	 for replication purposes. Or the keyword SERIAL to use the
	 special column added with a previous <a href="stmttableaddkey.html" title="TABLE ADD KEY"><span class="refentrytitle">TABLE ADD KEY</span></a> command. Default
	 is to use the table's primary key.  The index name is <span class="emphasis"><em>	  not </em></span> fully qualified; you must omit the
	 namespace.</p></dd>
<dt><span class="term"><code class="literal"> COMMENT = 'string' </code></span></dt>
<dd><p> A descriptive text added to the table entry.  </p></dd>
</dl></div>
<p>
    </p>
<p> This uses <a href="function.setaddtable-integer-integer-text-name-text.html">schemadocsetaddtable( integer, integer, text, name, text )</a>. </p>
</div>
<div class="refsect1" lang="en">
<a name="id537096"></a><h2>Example</h2>
<pre class="programlisting">SET ADD TABLE (
    SET ID = 1,
    ORIGIN = 1,
    ID = 20,
    FULLY QUALIFIED NAME = 'public.tracker_ticket',
    COMMENT = 'Support ticket'
);
    </pre>
</div>
<div class="refsect1" lang="en">
<a name="id537108"></a><h2> Locking Behaviour </h2>
<p> On the origin node, this operation requires a brief
    exclusive lock on the table in order to alter it to add the
    replication trigger.  On subscriber nodes, corresponding locking
    takes place at the time of the <code class="command">SUBSCRIBE_SET</code>
    event.  </p>
</div>
<div class="refsect1" lang="en">
<a name="id537125"></a><h2> Version Information </h2>
<p> This command was introduced in <span class="productname">Slony-I</span> 1.0 </p>
</div>
</div></body>
</html>
