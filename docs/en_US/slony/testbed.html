<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>21.  Slony-I Test Bed Framework </title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Slony-I HEAD_20051208 Documentation">
<link rel="up" href="slonyadmin.html" title=" Slony-I Administration ">
<link rel="prev" href="bestpractices.html" title="20.  Slony-I &#8220;Best Practices&#8221; ">
<link rel="next" href="help.html" title="22. More Slony-I Help">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="testbed"></a>21.  <span class="productname">Slony-I</span> Test Bed Framework </h2></div></div></div>
<p> As of version 1.2, <span class="productname">Slony-I</span> has a common test bed framework
intended to better support performing a comprehensive set of tests.
The code lives in the source tree under the <code class="filename"> tests</code> directory.</p>
<p>Here are some of the vital files...</p>
<div class="itemizedlist"><ul type="disc"><li><p> <code class="filename">run_test.sh</code> </p></li></ul></div>
<p> This is the central script for running tests.  Typical usage is
thus:</p>
<p> <code class="command"> ./run_test.sh </code></p>
<pre class="screen">usage ./run_test.sh testname</pre>
<p> You need to specify the subdirectory name of the test set to be
run; each such set is stored in a subdirectory of
<code class="filename">tests</code>.</p>
<p> You may need to set one or more of the following environment
variables to reflect your local configuration.  For instance, the
writer runs his &#8220;<span class="quote">main</span>&#8221; test like the following:</p>
<pre class="screen"> PGBINDIR=/opt/OXRS/dbs/pgsql8/bin PGPORT=5532 PGUSER=cbbrowne ./run_test.sh test1 </pre>
<div class="glosslist"><dl>
<dt> <code class="envar">PGBINDIR</code> </dt>
<dd>
<p> This determines where the test scripts look for
<span class="productname">PostgreSQL</span> and <span class="productname">Slony-I</span> binaries.  The default is <code class="filename">/usr/local/pgsql/bin</code> </p>
<p> There are also variables <code class="envar">PGBINDIR1</code> thru
<code class="envar">PGBINDIR13</code> which allows you to specify a separate path
for each database instance.  That will be particularly useful when
testing interoperability of <span class="productname">Slony-I</span> across different versions of
<span class="productname">PostgreSQL</span>. In order to create a database of each respective version,
you need to point to an <span class="application">initdb</span> of the
appropriate version.</p>
</dd>
<dt> <code class="envar">PGPORT</code> </dt>
<dd>
<p> This indicates what port the backend is on.  By
default, 5432 is used. </p>
<p> There are also variables <code class="envar">PORT1</code> thru
<code class="envar">PORT13</code> which allows you to specify a separate port
number for each database instance.  That will be particularly useful
when testing interoperability of <span class="productname">Slony-I</span> across different versions of
<span class="productname">PostgreSQL</span>. </p>
</dd>
<dt> <code class="envar">PGUSER</code> </dt>
<dd>
<p> By default, the user <code class="filename">postgres</code> is
used; this is taken as the default user ID to use for all of the
databases. </p>
<p> There are also variables <code class="envar">USER1</code> thru
<code class="envar">USER13</code> which allow specifying a separate user name for
each database instance.</p>
</dd>
<dt> <code class="envar">HOST</code> </dt>
<dd>
<p> By default, <code class="filename">localhost</code> is used.</p>
<p> There are also variables <code class="envar">HOST1</code> thru
<code class="envar">HOST13</code> which allow specifying a separate host for
each database instance.</p>
</dd>
<dt> <code class="envar">DB1</code> thru <code class="envar">DB13 </code> </dt>
<dd>
<p> By default, <code class="filename">slonyregress1</code> thru
<code class="filename">slonyregress13</code> are used.</p>
<p> You may override these from the environment. </p>
</dd>
<dt><code class="envar">ENCODING</code></dt>
<dd><p> By default, <code class="filename">UNICODE</code> is used, so
that tests can create UTF8 tables and test the multibyte capabilities.</p></dd>
</dl></div>
</div></body>
</html>
