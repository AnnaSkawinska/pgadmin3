<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>23. Log Analysis</title>
<link rel="stylesheet" href="stylesheet.css" type="text/css">
<link rev="made" href="pgsql-docs@postgresql.org">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="Slony-I 1.2.0_RC5 Documentation">
<link rel="up" href="slonyadmin.html" title="Slony-I Administration">
<link rel="prev" href="testbed.html" title="22.  Slony-I Test Bed Framework">
<link rel="next" href="help.html" title="24. More Slony-I Help">
<link rel="copyright" href="ln-legalnotice.html" title="Legal Notice">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="loganalysis"></a>23. Log Analysis</h2></div></div></div>
<a name="id2563700"></a><p>Here are some of things that you may find in your <span class="productname">Slony-I</span> logs,
and explanations of what they mean.</p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2563715"></a>23.1. CONFIG notices</h3></div></div></div>
<p>These entries are pretty straightforward. They are informative
messages about your configuration.</p>
<p>Here are some typical entries that you will probably run into in
your logs:

</p>
<pre class="screen">CONFIG main: local node id = 1
CONFIG main: loading current cluster configuration
CONFIG storeNode: no_id=3 no_comment='Node 3'
CONFIG storePath: pa_server=5 pa_client=1 pa_conninfo="host=127.0.0.1 dbname=foo user=postgres port=6132" pa_connretry=10
CONFIG storeListen: li_origin=3 li_receiver=1 li_provider=3
CONFIG storeSet: set_id=1 set_origin=1 set_comment='Set 1'
CONFIG main: configuration complete - starting threads</pre>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2563738"></a>23.2. DEBUG Notices</h3></div></div></div>
<p>Debug notices are always prefaced by the name of the thread that
the notice originates from. You will see messages from the following
threads:

</p>
<div class="variablelist"><dl>
<dt><span class="term">localListenThread</span></dt>
<dd><p> This is the local thread that listens for events on
the local node.</p></dd>
<dt><span class="term">remoteWorkerThread-X</span></dt>
<dd><p> The thread processing remote events.  You can expect
to see one of these for each node that this node communicates
with.</p></dd>
<dt><span class="term">remoteListenThread-X</span></dt>
<dd><p>Listens for events on a remote node database.  You may
expect to see one of these for each node in the
cluster.</p></dd>
<dt><span class="term">cleanupThread</span></dt>
<dd><p> Takes care
of things like vacuuming, cleaning out the confirm and event tables,
and deleting old data.</p></dd>
<dt><span class="term">syncThread</span></dt>
<dd><p> Generates SYNC
events.</p></dd>
</dl></div>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2563789"></a>23.3.  How to read <span class="productname">Slony-I</span> logs </h3></div></div></div>
<a name="id2563799"></a><p> Note that as far as slon is concerned, there is no
&#8220;<span class="quote">master</span>&#8221; or &#8220;<span class="quote">slave.</span>&#8221; They are just
nodes. </p>
<p>What you can expect, initially, is to see, on both nodes, some
events propagating back and forth.  Firstly, there should be some
events published to indicate creation of the nodes and paths.  If you
don't see those, then the nodes aren't properly communicating with one
another, and nothing else will happen... </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>Create the two nodes.</p>
<p> No slons are running yet, so there are no logs to look
at.</p>
</li>
<li>
<p> Start the two slons</p>
<p> The logs for each will start out very quiet, as neither node
has much to say, and neither node knows how to talk to another node.
Each node will periodically generate a <code class="command">SYNC</code> event,
but recognize <span class="emphasis"><em>nothing</em></span> about what is going on on
other nodes.</p>
</li>
<li>
<p> Do the <a href="stmtstorepath.html" title="STORE
     PATH"><span class="refentrytitle">STORE
     PATH</span></a> to set up
communications paths.  That will allow the nodes to start to become
aware of one another.</p>
<p> The slon logs should now start to receive events from
&#8220;<span class="quote">foreign</span>&#8221; nodes.</p>
<p> In version 1.0, <a href="table.sl-listen.html">sl_listen</a> is not set up
automatically, so things still remain quiet until you explicitly
submit <code class="command">STORE LISTEN</code> requests. In version 1.1, the
&#8220;<span class="quote">listen paths</span>&#8221; are set up automatically, which will much
more quickly get the communications network up and running.  </p>
<p> If you look at the contents of the tables <a href="table.sl-node.html">sl_node</a> and <a href="table.sl-path.html">sl_path</a> and <a href="table.sl-listen.html">sl_listen</a>, on each node, that should give a good idea
as to where things stand.  Until the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> starts,
each node may only be partly configured.  If there are two nodes,
there should be two entries in all three of these tables once the
communications configuration is set up properly.  If there are fewer
entries than that, well, that should give you some idea of what is
missing.</p>
</li>
<li>
<p> If needed (<span class="emphasis"><em>e.g.</em></span> - before version
1.1), submit <a href="stmtstorelisten.html" title="STORE LISTEN"><span class="refentrytitle">STORE LISTEN</span></a> requests to indicate how
the nodes will use the communications paths. </p>
<p> Once this has been done, the nodes' logs should show a greater
level of activity, with events periodically being initiated on one
node or the other, and propagating to the other. </p>
</li>
<li><p> You'll set up the set
(<a href="stmtcreateset.html" title="CREATE SET"><span class="refentrytitle">CREATE SET</span></a>), add tables
(<a href="stmtsetaddtable.html" title="SET ADD TABLE"><span class="refentrytitle">SET ADD TABLE</span></a>), and sequences
(<a href="stmtsetaddsequence.html" title="SET ADD SEQUENCE"><span class="refentrytitle">SET ADD SEQUENCE</span></a>), and will see relevant
events <a href="loganalysis.html#logaddobjects" title="23.4.6.  Log Entries - Adding Objects to Sets  ">Section 23.4.6, &#8220; Log Entries - Adding Objects to Sets  &#8221;</a> only in the logs for the origin
node for the set. </p></li>
<li>
<p> Then, when you submit the <a href="stmtsubscribeset.html" title="SUBSCRIBE SET"><span class="refentrytitle">SUBSCRIBE SET</span></a> request, the event should go to both
nodes. </p>
<p> The origin node has little more to do, after that...  The
subscriber will then have a <code class="command">COPY_SET</code> event, which
will lead to logging information about adding each table and copying
its data.  See <a href="loganalysis.html#logsubtime" title="23.4.4.  Log Entries At Subscription Time ">Section 23.4.4, &#8220; Log Entries At Subscription Time &#8221;</a> for more
details.</p>
</li>
</ul></div>
<p>After that, you'll mainly see two sorts of behaviour:</p>
<div class="itemizedlist"><ul type="disc">
<li><p> On the origin, there won't be too terribly much
logged, just indication that some <code class="command">SYNC</code> events are
being generated and confirmed by other nodes.
See <a href="loganalysis.html#lognormalsync" title="23.4.5.  Log Entries Associated With Normal SYNC activity ">Section 23.4.5, &#8220; Log Entries Associated With Normal SYNC activity &#8221;</a> to see the sorts of log entries to
expect.</p></li>
<li><p> On the subscriber, there will be reports of
<code class="command">SYNC</code> events, and that the subscriber pulls data
from the provider for the relevant set(s).  This will happen
infrequently if there are no updates going to the origin node; it will
happen frequently when the origin sees heavy updates. </p></li>
</ul></div>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="id2564044"></a>23.4.  Log Messages and Implications </h3></div></div></div>
<p> This section lists numerous of the error messages found in
<span class="productname">Slony-I</span>, along with a brief explanation of implications.  It is a
fairly well comprehensive list, leaving out mostly some of
the <code class="command">DEBUG4</code> messages that are generally
uninteresting.</p>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="logshiplog"></a>23.4.1.  Log Messages Associated with Log Shipping </h4></div></div></div>
<p> Most of these represent errors that come up if
the <a href="logshipping.html" title="14. Log Shipping - Slony-I with Files">Section 14, &#8220;Log Shipping - <span class="productname">Slony-I</span> with Files&#8221;</a> functionality breaks.  You may expect
things to break if the filesystem being used for log shipping fills,
or if permissions on that directory are wrongly set. </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: log archive failed %s - %s\n</code> </p>
<p> This indicates that an error was encountered trying to write a
log shipping file.  Normally the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> will retry, and hopefully
succeed. </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: writing archive log...</code></p>
<p> This indicates that a log shipping archive log is being written for a particular <code class="command">SYNC</code> set. </p>
</li>
<li>
<p><code class="command">INFO: remoteWorkerThread_%d: Run Archive Command %s</code></p>
<p> If <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> has been configured (<code class="option">-x</code>
aka <code class="envar">command_on_logarchive</code>) to run a command after
generating each log shipping archive log, this reports when that
process is spawned using <code class="function">system()</code>. </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not open
COPY SET archive file %s - %s</code></p>
<p> Seems pretty self-explanatory... </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not generate COPY SET archive header %s - %s</code></p>
<p> Probably means that we just filled up a filesystem... </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="ddllogs"></a>23.4.2.  Log Messages -  DDL scripts </h4></div></div></div>
<p> The handling of DDL is somewhat fragile, as described
in <a href="ddlchanges.html" title="15. Database Schema Changes (DDL)">Section 15, &#8220;Database Schema Changes (DDL)&#8221;</a>; here are both informational and error
messages that may occur in the progress of
an <a href="stmtddlscript.html" title="EXECUTE SCRIPT"><span class="refentrytitle">EXECUTE SCRIPT</span></a> request.</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: DDL preparation
failed - set %d - only on node %</code></p>
<p> Something broke when applying a DDL script on one of the nodes.
This is quite likely indicates that the node's schema differed from
that on the origin; you may need to apply a change manually to the
node to allow the event to proceed.  The scary, scary alternative
might be to delete the offending event, assuming it can't possibly
work...</p>
</li>
<li>
<p><code class="command">SLON_CONFIG: remoteWorkerThread_%d: DDL request with %d statements</code></p>
<p> This is informational, indicating how many SQL statements were processed. </p>
</li>
<li>
<p><code class="command">SLON_ERROR: remoteWorkerThread_%d: DDL had invalid number of statements - %d</code></p>
<p> Occurs if there were &lt; 0 statements (which should be impossible) or &gt; MAXSTATEMENTS statements.  Probably the script was bad...</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: malloc()
failure in DDL_SCRIPT - could not allocate %d bytes of
memory</code></p>
<p> This should only occur if you submit some extraordinarily large
DDL script that makes a <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> run out of memory </p>
</li>
<li>
<p><code class="command">CONFIG: remoteWorkerThread_%d: DDL Statement %d: [%s]</code></p>
<p> This lists each DDL statement as it is submitted. </p>
</li>
<li>
<p><code class="command">ERROR: DDL Statement failed - %s</code></p>
<p> Oh, dear, one of the DDL statements that worked on the origin
failed on this remote node... </p>
</li>
<li>
<p><code class="command">CONFIG: DDL Statement success - %s</code></p>
<p> All's well...  </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not generate DDL archive tracker %s - %s</code></p>
<p> Apparently the DDL script couldn't be written to a log shipping file... </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not submit DDL script %s - %s</code></p>
<p>Couldn't write the script to a log shipping file.</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not close DDL script %s - %s</code></p>
<p>Couldn't close a log shipping file for a DDL script.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I ddlScript_prepare(): set % not found</code></p>
<p> Set wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I ddlScript_prepare_int(): set % not found</code></p>
<p> Set wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: alterTableForReplication(): Table with id % not found</code></p>
<p> Apparently the table wasn't found; could the schema be messed up? </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: alterTableForReplication(): Table % is already in altered state</code></p>
<p> Curious...  We're trying to set a table up for replication
a <span class="emphasis"><em>second</em></span> time?  </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: alterTableRestore(): Table with id % not found</code></p>
<p> This runs when a table is being restored to &#8220;<span class="quote">non-replicated</span>&#8221; state; apparently the replicated table wasn't found.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: alterTableRestore(): Table % is not in altered state</code></p>
<p> Hmm.  The table isn't in altered replicated state.  That shouldn't be, if replication had been working properly...</p>
</li>
<li>
<p><code class="command">NOTICE: Slony-I: alterTableForReplication(): multiple instances of trigger % on table %'',</code></p>
<p> This normally happens if you have a table that had a trigger attached to it that replication hid due to this being a subscriber node, and then you added a trigger by the same name back to replication.  Now, when trying to "fix up" triggers, those two triggers conflict. </p>
<p> The DDL script will keep running and rerunning, or the UNINSTALL NODE will keep failing, until you drop the &#8220;<span class="quote">visible</span>&#8221; trigger, by hand, much as you must have added it, by hand, earlier. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: Unable to disable triggers</code></p>
<p> This is the error that follows the &#8220;<span class="quote">multiple triggers</span>&#8221; problem. </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2564434"></a>23.4.3.  Threading Issues </h4></div></div></div>
<p> There should not be any &#8220;<span class="quote">user-serviceable</span>&#8221; aspects
to the <span class="productname">Slony-I</span> threading model; each <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> creates a quite
well-specified set of helper threads to manage the various database
connections that it requires.  The only way that anything should break
on the threading side is if you have not compiled <span class="productname">PostgreSQL</span> libraries
to &#8220;<span class="quote">play well</span>&#8221; with threading, in which case you will be
unable to compile <span class="productname">Slony-I</span> in the first place. </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">FATAL: remoteWorkerThread_%d: pthread_create() - %s</code></p>
<p> Couldn't create a new remote worker thread. </p>
</li>
<li>
<p><code class="command">DEBUG1 remoteWorkerThread_%d: helper thread for provider %d created</code></p>
<p> This normally happens when the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> starts: a thread is created for each node to which the local node should be listening for events.</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: helper thread for provider %d terminated </code></p>
<p> If subscriptions reshape such that a node no longer provides a
subscription, then the thread that works on that node can be
dropped. </p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: disconnecting
from data provider %d </code></p>
<p> A no-longer-used data provider may be dropped; if connection
information is changed, the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> needs to disconnect and
reconnect. </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: ignore new events due to shutdown</code></p>
<p> If the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is shutting down, it is futile to process more events</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: node %d - no worker thread</code></p>
<p> Curious: we can't wake up the worker thread; there probably
should already be one... </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="logsubtime"></a>23.4.4.  Log Entries At Subscription Time </h4></div></div></div>
<p> Subscription time is quite a special time in <span class="productname">Slony-I</span>.  If you
have a large amount of data to be copied to subscribers, this may take
a considerable period of time.  <span class="productname">Slony-I</span> logs a fairly considerable
amount of information about its progress, which is sure to be useful
to the gentle reader.  In particular, it generates log output every
time it starts and finishes copying data for a given table as well as
when it completes reindexing the table.  That may not make a 28 hour
subscription go any faster, but at least helps you have some idea of
how it is progressing. </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">DEBUG1: copy_set %d</code></p>
<p> This indicates the beginning of copying data for a new subscription. </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: set %d not found in runtime configuration </code></p>
<p> <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> tried starting up a subscription; it couldn't find conninfo for the data source.  Perhaps paths are not properly propagated?</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: node %d has no pa_conninfo </code></p>
<p> Apparently the conninfo configuration
was <span class="emphasis"><em>wrong</em></span>...</p>
</li>
<li>
<p><code class="command">ERROR: copy set %d cannot connect to provider DB node %d </code></p>
<p> <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> couldn't connect to the provider.  Is the conninfo
wrong?  Or perhaps authentication is misconfigured?  Or perhaps the
database is down?</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: connected to provider DB </code></p>
<p> Excellent: the copy set has a connection to its provider</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: sequenceSetValue(): sequence % not found</code></p>
<p> Curious; the sequence object is missing.  Could someone have dropped it from the schema by hand (<span class="emphasis"><em>e.g.</em></span> - not using <a href="stmtddlscript.html" title="EXECUTE SCRIPT"><span class="refentrytitle">EXECUTE SCRIPT</span></a>)?</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: subscribeSet() must be called on provider</code></p>
<p> This function should only get called on the provider node.  <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> normally handles this right, unless one had wrong DSNs in a <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> script...</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: subscribeSet(): set % not found</code></p>
<p> Hmm.  The provider node isn't aware of this set.  Wrong parms to a <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> script?</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: subscribeSet(): set origin and receiver cannot be identical</code></p>
<p> Duh, an origin node can't subscribe to itself.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: subscribeSet(): set provider and receiver cannot be identical</code></p>
<p> A receiver must subscribe to a <span class="emphasis"><em>different</em></span> node...</p>
</li>
<li>
<p><code class="command">Slony-I: subscribeSet(): provider % is not an active forwarding node for replication set %</code></p>
<p> You can only use a live, active, forwarding provider as a data
source.  </p>
</li>
<li>
<p>Slony-I: subscribeSet_int(): set % is not active, cannot change provider<code class="command"></code></p>
<p> You can't change the provider just yet...</p>
</li>
<li>
<p><code class="command">Slony-I: subscribeSet_int(): set % not found</code></p>
<p> This node isn't aware of the set...  Perhaps you submitted wrong parms?</p>
</li>
<li>
<p><code class="command">Slony-I: unsubscribeSet() must be called on receiver</code></p>
<p> Seems obvious...  This probably indicates a bad <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> admin DSN...</p>
</li>
<li>
<p><code class="command">Slony-I: Cannot unsubscribe set % while being provider</code></p>
<p> This should seem obvious; <a href="stmtunsubscribeset.html" title="UNSUBSCRIBE SET"><span class="refentrytitle">UNSUBSCRIBE SET</span></a> will fail if a node has dependent subscribers for which it is the provider </p>
</li>
<li>
<p><code class="command">Slony-I: cleanupEvent(): Single node - deleting events &lt; %</code></p>
<p> If there's only one node, the cleanup event will delete old events so that you don't get &#8220;<span class="quote">build-up of crud.</span>&#8221;</p>
</li>
<li>
<p><code class="command">Slony-I: tableAddKey(): table % not found</code></p>
<p> Perhaps you didn't copy the schema over properly?</p>
</li>
<li>
<p><code class="command">Slony-I: tableDropKey(): table with ID% not found</code></p>
<p> Seems curious; you were presumably replicating to this table, so for this to be gone seems rather odd...</p>
</li>
<li>
<p><code class="command">Slony-I: determineIdxnameUnique(): table % not found</code></p>
<p>Did you properly copy over the schema to a new node???</p>
</li>
<li>
<p><code class="command">Slony-I: table % has no primary key</code></p>
<p> This likely signifies a bad loading of schema...</p>
</li>
<li>
<p><code class="command">Slony-I: table % has no unique index %</code></p>
<p> This likely signifies a bad loading of schema...</p>
</li>
<li>
<p><code class="command">WARN: remoteWorkerThread_%d: transactions
earlier than XID %s are still in progress</code></p>
<p> This indicates that some old transaction is in progress from before the earliest available <code class="command">SYNC</code> on the provider.  <span class="productname">Slony-I</span> cannot start replicating until that transaction completes.  This will repeat until thetransaction completes...</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: prepare to copy table %s </code></p>
<p> This indicates that <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is beginning preparations to set up subscription for a table.</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: table %s will require Slony-I serial key</code></p>
<p> Evidently this is a table defined with <a href="stmttableaddkey.html" title="TABLE ADD KEY"><span class="refentrytitle">TABLE ADD KEY</span></a> where <span class="productname">Slony-I</span> has to add a surrogate primary key.</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not lock table %s on subscriber</code></p>
<p> For whatever reason, the table could not be locked, so the
subscription needs to be restarted.  If the problem was something like
a deadlock, retrying may help.  If the problem was otherwise, you may
need to intervene...</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: all tables for set %d found on subscriber</code></p>
<p> An informational message indicating that the first pass through the tables found no problems... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: copy sequence %s</code></p>
<p> Processing some sequence... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: copy table %s</code></p>
<p> <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is starting to copy a table... </p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: table %s Slony-I serial key added local</code></p>
<p> Just added new column to the table to provide surrogate primary key.</p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: local table %s already has Slony-I serial key</code></p>
<p> Did not need to add serial key; apparently it was already there.</p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: table %s does not require Slony-I serial key</code></p>
<p> Apparently this table didn't require a special serial key... </p>
</li>
<li><p><code class="command">DEBUG3: remoteWorkerThread_%d: table %s Slony-I serial key added local</code></p></li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: Begin COPY of table %s</code></p>
<p> <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is about to start the COPY on both sides to copy a table... </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: Could not generate copy_set request for %s - %s</code></p>
<p> This indicates that the <code class="command">delete/copy</code> requests
failed on the subscriber.  The <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> will repeat
the <code class="command">COPY_SET</code> attempt; it will probably continue to
fail.. </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: copy to stdout on provider - %s %s</code></p>
<p> Evidently something about the COPY to <code class="filename">stdout</code> on the provider node broke...  The event will be retried... </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: copy from stdin on local node - %s %s</code></p>
<p> Evidently something about the COPY into the table on the
subscriber node broke...  The event will be
retried... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: %d bytes copied for table %s</code></p>
<p> This message indicates that the COPY of the table has
completed.  This is followed by running <code class="command">ANALYZE</code> and
reindexing the table on the subscriber.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: %.3f seconds
to copy table %s</code></p>
<p> After this message, copying and reindexing and analyzing the table on the subscriber is complete.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: set last_value of sequence %s (%s) to %s</code></p>
<p> As should be no surprise, this indicates that a sequence has been processed on the subscriber.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: %.3 seconds to copy sequences</code></p>
<p> Summarizing the time spent processing sequences in the <code class="command">COPY_SET</code> event. </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: query %s did not return a result </code></p>
<p> This indicates that the query, as part of final processing of <code class="command">COPY_SET</code>, failed.  The copy will restart... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: copy_set no previous SYNC found, use enable event</code></p>
<p> This takes place if no past SYNC event was found; the current
event gets set to the event point of
the <code class="command">ENABLE_SUBSCRIPTION</code> event.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: copy_set SYNC found, use event seqno %s</code></p>
<p> This takes place if a SYNC event was found; the current
event gets set as shown. </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: sl_setsync entry for set %d not found on provider</code></p>
<p> SYNC synchronization information was expected to be drawn from
an existing subscriber, but wasn't found.  Something
replication-breakingly-bad has probably
happened... </p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: could not insert to sl_setsync_offline</code></p>
<p> Oh, dear.  After setting up a subscriber, and getting pretty
well everything ready, some writes to a log shipping file failed.
Perhaps disk filled up...  </p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: %.3f seconds to build initial setsync status</code></p>
<p> Indicates the total time required to get the copy_set event finalized...</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: disconnected from provider DB</code></p>
<p> At the end of a subscribe set event, the subscriber's <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a>
will disconnect from the provider, clearing out
connections... </p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: copy_set %d done in %.3f seconds</code></p>
<p> Indicates the total time required to complete copy_set...  This indicates a successful subscription!</p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="lognormalsync"></a>23.4.5.  Log Entries Associated With Normal SYNC activity </h4></div></div></div>
<p> Some of these messages indicate exceptions, but
the &#8220;<span class="quote">normal</span>&#8221; stuff represents what you should expect to
see most of the time when replication is just plain working.</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: forward confirm %d,%s received by %d</code></p>
<p> These events should occur frequently and routinely as nodes report confirations of the events they receive. </p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: SYNC %d processing</code></p>
<p> This indicates the start of processing of a <code class="command">SYNC</code> </p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: No pa_conninfo
for data provider %d</code></p>
<p> Oh dear, we haven't connection information to connect to the
data provider.  That shouldn't be possible,
normally...</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: cannot connect to data provider %d on 'dsn'</code></p>
<p> Oh dear, we haven't got <span class="emphasis"><em>correct</em></span> connection
information to connect to the data provider.</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: connected to data provider %d on 'dsn'</code></p>
<p> Excellent; the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> has connected to the provider. </p>
</li>
<li>
<p><code class="command">WARN: remoteWorkerThread_%d: don't know what ev_seqno node %d confirmed for ev_origin %d</code></p>
<p> There's no confirmation information available for this node's provider; need to abort the <code class="command">SYNC</code> and wait a bit in hopes that that information will emerge soon...</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d: data provider %d only confirmed up to ev_seqno %d for ev_origin %d </code></p>
<p> The provider for this node is a subscriber, and apparently that subscriber is a bit behind.  The <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> will need to wait for the provider to catch up until it has <span class="emphasis"><em> new</em></span> data. </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: data provider %d confirmed up to ev_seqno %s for ev_origin %d - OK</code></p>
<p> All's well; the provider should have the data that the subscriber needs...</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: syncing set %d with %d table(s) from provider %d</code></p>
<p> This is declaring the plans for a <code class="command">SYNC</code>: we have a set with some tables to process.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: ssy_action_list value: %s length: %d</code></p>
<p> This portion of the query to collect log data to be applied has been known to &#8220;<span class="quote">bloat up</span>&#8221;; this shows how it has gotten compressed... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: Didn't add OR to provider</code></p>
<p> This indicates that there wasn't anything in a &#8220;<span class="quote">provider</span>&#8221; clause in the query to collect log data to be applied, which shouldn't be.  Things are quite likely to go bad at this point... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: no sets need syncing for this event</code></p>
<p>This will be the case for all <code class="command">SYNC</code> events generated on nodes that are not originating replication sets.  You can expect to see these messages reasonably frequently. </p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: activate helper %d</code></p>
<p> We're about to kick off a thread to help process <code class="command">SYNC</code> data...</p>
</li>
<li>
<p><code class="command">DEBUG4: remoteWorkerThread_%d: waiting for log data</code></p>
<p> The thread is waiting to get data to consume (e.g. - apply to the replica).</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: %s %s - qualification was %s </code></p>
<p> Apparently an application of replication data to the subscriber failed...  This quite likely indicates some sort of serious corruption.</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: replication query did not affect one row (cmdTuples = %s) - query was: %s qualification was: %s</code></p>
<p> If <code class="envar"> SLON_CHECK_CMDTUPLES</code> is set, <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> applies
changes one tuple at a time, and verifies that each change affects
exactly one tuple.  Apparently that wasn't the case here, which
suggests a corruption of replication.  That's a rather bad
thing...</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: SYNC aborted</code></p>
<p> If any errors have been encountered that haven't already aborted the <code class="command">SYNC</code>, this catches and aborts it.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: new sl_rowid_seq value: %s</code></p>
<p> This marks the progression of this internal <span class="productname">Slony-I</span> sequence. </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: SYNC %d done in %.3f seconds</code></p>
<p> This indicates the successful completion of a <code class="command">SYNC</code>.  Hurray!</p>
</li>
<li>
<p><code class="command">DEBUG1: remoteWorkerThread_%d_d:%.3f seconds delay for first row </code></p>
<p> This indicates how long it took to get the first row from the LOG cursor that pulls in data from the sl_log tables.</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d_d: large log_cmddata for actionseq %s not found</code></p>
<p> <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> could not find the data for one of the &#8220;<span class="quote">very large</span>&#8221; sl_log table tuples that are pulled individually.  This shouldn't happen.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d_d:%.3f seconds until close cursor </code></p>
<p> This indicates how long it took to complete reading data from the LOG cursor that pulls in data from the sl_log tables.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d_d: inserts=%d updates=%d deletes=%d </code></p>
<p> This reports how much activity was recorded in the current <code class="command">SYNC</code> set. </p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: compress_actionseq(list,subquery) Action list: %s</code></p>
<p> This indicates a portion of the LOG cursor query that is about to be compressed.  (In some cases, this could grow to <span class="emphasis"><em>enormous</em></span> size, blowing up the query parser...) </p>
</li>
<li>
<p><code class="command">DEBUG3: remoteWorkerThread_%d: compressed actionseq subquery %s</code></p>
<p> This indicates what that subquery compressed into. </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="logaddobjects"></a>23.4.6.  Log Entries - Adding Objects to Sets  </h4></div></div></div>
<p> These entries will be seen on an origin node's logs at the time
you are configuring a replication set; some of them will be seen on
subscribers at subscription time.  </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: Slony-I: setAddTable_int(): table % has no index %</code></p>
<p> Apparently a PK index was specified that is absent on this node...</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddTable_int(): table % not found</code></p>
<p> Table wasn't found on this node; did you load the schema in properly?. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddTable_int(): table % is not a regular table</code></p>
<p> You tried to replicate something that isn't a table; you can't do that! </p>
</li>
<li>
<p><code class="command">NOTICE: Slony-I setAddTable_int(): table % PK column % nullable</code></p>
<p> You tried to replicate a table where one of the columns in the would-be primary key is allowed to be null.  All PK columns must be <code class="command">NOT NULL.</code> This request is about to fail. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddTable_int(): table % not replicable!</code></p>
<p> 
This happens because of the NULLable PK column. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddTable_int(): table id % has already been assigned!</code></p>
<p> The table ID value needs to be assigned uniquely
in <a href="stmtsetaddtable.html" title="SET ADD TABLE"><span class="refentrytitle">SET ADD TABLE</span></a>; apparently you requested a value
already in use.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence(): set % not found</code></p>
<p> Apparently the set you requested is not available...</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence(): set % has remote origin</code></p>
<p> You may only add things at the origin node.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence(): cannot add sequence to currently subscribed set %</code></p>
<p> Apparently the set you requested has already been subscribed.  You cannot add tables/sequences to an already-subscribed set.  You will need to create a new set, add the objects to that new set, and set up subscriptions to that.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence_int(): set % not found</code></p>
<p> Apparently the set you requested is not available...</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence_int(): sequence % not found</code></p>
<p> Apparently the sequence you requested is not available on this node.  How did you set up the schemas on the subscribers???</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence_int(): % is not a sequence</code></p>
<p> Seems pretty obvious :-).</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setAddSequence_int(): sequence ID % has already been assigned</code></p>
<p> Each sequence ID added must be unique; apparently you have reused an ID.</p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2565881"></a>23.4.7.  Logging When Moving Objects Between Sets  </h4></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: Slony-I setMoveTable_int(): table % not found</code></p>
<p> Table wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveTable_int(): set ids cannot be identical</code></p>
<p> Does it make sense to move a table from a set into the very same set? </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveTable_int(): set % not found</code></p>
<p> Set wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveTable_int(): set % does not originate on local node</code></p>
<p> Set wasn't found to have origin on this node; you probably gave the wrong EVENT NODE... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveTable_int(): subscriber lists of set % and % are different</code></p>
<p> You can only move objects between sets that have identical subscriber lists. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveSequence_int(): sequence % not found</code></p>
<p> Sequence wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveSequence_int(): set ids cannot be identical</code></p>
<p> Does it make sense to move a sequence from a set into the very same set? </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveSequence_int(): set % not found</code></p>
<p> Set wasn't found on this node; you probably gave the wrong ID number... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveSequence_int(): set % does not originate on local node</code></p>
<p> Set wasn't found to have origin on this node; you probably gave the wrong EVENT NODE... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setMoveSequence_int(): subscriber lists of set % and % are different</code></p>
<p> You can only move objects between sets that have identical subscriber lists. </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2565999"></a>23.4.8.  Issues with Dropping Objects  </h4></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: Slony-I setDropTable(): table % not found</code></p>
<p> Table wasn't found on this node; are you sure you had the ID right? </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setDropTable(): set % not found</code></p>
<p> The replication set wasn't found on this node; are you sure you had the ID right? </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setDropTable(): set % has remote origin</code></p>
<p> The replication set doesn't originate on this node; you probably need to specify an <code class="command">EVENT NODE</code> in the <a href="stmtsetdroptable.html" title="SET DROP TABLE"><span class="refentrytitle">SET DROP TABLE</span></a> command. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setDropSequence_int(): sequence % not found</code></p>
<p> Could this sequence be in another set?</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setDropSequence_int(): set % not found</code></p>
<p> Could you have gotten the set ID wrong?</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I setDropSequence_int(): set % has origin at another node - submit this to that node</code></p>
<p> This message seems fairly self-explanatory...</p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2566081"></a>23.4.9.  Issues with MOVE SET, FAILOVER, DROP NODE  </h4></div></div></div>
<p> Many of these errors will occur if you submit a <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a>
script that describes a reconfiguration incompatible with your
cluster's current configuration.  Those will lead to the
feeling: &#8220;<span class="quote">Whew, I'm glad <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> caught that for me!</span>&#8221; </p>
<p> Some of the others lead to a <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> telling itself to fall
over; all <span class="emphasis"><em>should</em></span> be well when you restart it, as
it will read in the revised, newly-correct configuration when it
starts up.</p>
<p> Alas, a few indicate that &#8220;<span class="quote">something bad
happened,</span>&#8221; for which the resolution may not necessarily be
easy.  Nobody said that replication was easy, alas...</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: Slony-I: DROP_NODE cannot initiate on the dropped node</code></p>
<p> You need to have an EVENT NODE other than the node that is to be dropped.... </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: Node % is still configured as a data provider</code></p>
<p> You cannot drop a node that is in use as a data provider; you
need to reshape subscriptions so no nodes are dependent on it first. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: Node % is still origin of one or more sets</code></p>
<p> You can't drop a node if it is the origin for a set!  Use <a href="stmtmoveset.html" title="MOVE SET"><span class="refentrytitle">MOVE SET</span></a> or <a href="stmtfailover.html" title="FAILOVER"><span class="refentrytitle">FAILOVER</span></a> first. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: cannot failover - node % has no path to the backup node</code></p>
<p> You cannot failover to a node that isn't connected to all the subscribers, at least indirectly. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: cannot failover - node % is not subscribed to set %</code></p>
<p> You can't failover to a node that doesn't subscribe to all the relevant sets. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: cannot failover - subscription for set % is not active</code></p>
<p> If the subscription has been set up, but isn't yet active, that's still no good.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: cannot failover - node % is not a forwarder of set %</code></p>
<p> You can only failover or move a set to a node that has
forwarding turned on. </p>
</li>
<li>
<p><code class="command">NOTICE: failedNode: set % has no other direct receivers - move now</code></p>
<p> If the backup node is the only direct subscriber, then life is a bit simplified...  No need to reshape any subscriptions!</p>
</li>
<li>
<p><code class="command">NOTICE: failedNode set % has other direct receivers - change providers only</code></p>
<p> In this case, all direct subscribers are pointed to the backup node, and the backup node is pointed to receive from another node so it can get caught up.</p>
</li>
<li>
<p><code class="command">NOTICE: Slony-I: Please drop schema _@CLUSTERNAME@</code></p>
<p> A node has been uninstalled; you may need to drop the schema... </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2566257"></a>23.4.10.  Log Switching </h4></div></div></div>
<p> These messages relate to the new-in-1.2 facility whereby
<span class="productname">Slony-I</span> periodically switches back and forth between storing data
in <code class="envar">sl_log_1</code> and <code class="envar">sl_log_2</code>.</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">Slony-I: Logswitch to sl_log_2 initiated'</code></p>
<p> Indicates that <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is in the process of switching over to this log table.</p>
</li>
<li>
<p><code class="command">Slony-I: Logswitch to sl_log_1 initiated'</code></p>
<p> Indicates that <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is in the process of switching over to this log table.</p>
</li>
<li>
<p><code class="command">Previous logswitch still in progress</code></p>
<p> An attempt was made to do a log switch while one was in progress...</p>
</li>
<li>
<p><code class="command">ERROR: remoteWorkerThread_%d: cannot determine current log status</code></p>
<p> The attempt to read from sl_log_status, which determines
whether we're working on <code class="envar">sl_log_1</code>
or <code class="envar">sl_log_2</code> got no results; that can't be a good thing,
as there certainly should be data here...  Replication is likely about
to halt...</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: current local log_status is %d</code></p>
<p> This indicates which of <code class="envar">sl_log_1</code> and <code class="envar">sl_log_2</code> are being used to store replication data. </p>
</li>
</ul></div>
</div>
<div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="id2566361"></a>23.4.11.  Miscellanea </h4></div></div></div>
<p> Perhaps these messages should be categorized further; that
remains a task for the documentors.</p>
<div class="itemizedlist"><ul type="disc">
<li>
<p><code class="command">ERROR: Slonik version: @MODULEVERSION@ != Slony-I version in PG build %</code></p>
<p> This is raised in <code class="function">checkmoduleversion()</code> if there is a mismatch between the version of <span class="productname">Slony-I</span> as reported by <a href="slonik.html" title="slonik"><span class="refentrytitle"><a name="app-slonik-title"></a><span class="application">slonik</span></span></a> versus what the <span class="productname">PostgreSQL</span> build has.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: registry key % is not an int4 value</code></p>
<p> Raised in <code class="function">registry_get_int4()</code>, this complains if a requested value turns out to be NULL.</p>
</li>
<li>
<p><code class="command">ERROR: registry key % is not a text value</code></p>
<p> Raised in <code class="function">registry_get_text()</code>, this complains if a requested value turns out to be NULL.</p>
</li>
<li>
<p><code class="command">ERROR: registry key % is not a timestamp value</code></p>
<p> Raised in <code class="function">registry_get_timestamp()</code>, this complains if a requested value turns out to be NULL.</p>
</li>
<li>
<p><code class="command">NOTICE: Slony-I: cleanup stale sl_nodelock entry for pid=%</code></p>
<p> This will occur when a <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> starts up after another has crashed; this is routine cleanup.</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: This node is already initialized</code></p>
<p> This would typically happen if you submit <a href="stmtstorenode.html" title="STORE NODE"><span class="refentrytitle">STORE NODE</span></a> gainst a node that has already been set up with the <span class="productname">Slony-I</span> schema. </p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: node % not found</code></p>
<p> An attempt to mark a node not listed locally as enabled should fail...</p>
</li>
<li>
<p><code class="command">ERROR: Slony-I: node % is already active</code></p>
<p> An attempt to mark a node already marked as active as active should fail...</p>
</li>
<li>
<p><code class="command">DEBUG4: remoteWorkerThread_%d: added active set %d to provider %d</code></p>
<p> Indicates that this set is being provided by this
provider.</p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: event %d
ignored - unknown origin</code></p>
<p> Probably happens if events arrive before
the <code class="command">STORE_NODE</code> event that tells that the new node
now exists... </p>
</li>
<li>
<p><code class="command">WARN: remoteWorkerThread_%d: event %d ignored - origin inactive</code></p>
<p> This shouldn't occur now (2006) as we don't support the notion
of deactivating a node... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: event %d ignored - duplicate </code></p>
<p> This might be expected to happen if the event notification
comes in concurrently from two sources... </p>
</li>
<li>
<p><code class="command">DEBUG2: remoteWorkerThread_%d: unknown node %d</code></p>
<p> Happens if the <a href="slon.html" title="slon"><span class="refentrytitle"><a name="app-slon-title"></a><span class="application">slon</span></span></a> is unaware of this node; probably a sign
of <code class="command">STORE_NODE</code> requests not
propagating... </p>
</li>
</ul></div>
</div>
</div>
</div></body>
</html>
