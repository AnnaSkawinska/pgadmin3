<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="STYLESHEET" type="text/css" href="pgadmin3.css">
<title>Dotazovací nástroj</title>
</head>

<body>

<h3>Dotazovací nástroj</h3>

<center><img src="images/query.png"></center>

<p>Dotazovací nástroj vám umožňuje provádět libovolné příkazy SQL.</p>

<p>
Horní část dotazovacího nástroje obsahuje Editor SQL, ve kterém píšete své příkazy. Můžete také dotaz načíst ze souboru a do souboru ho i uložit. 
Při ukládání se podle přípony určí kódování. Pokud je *.sql, použije se 8bitová lokální sada, pokud je *.usql použije se UTF-8, které zahrnuje 
všechny znaky z celého svět podle standardu <a href="http://www.unicode.org/">Unicode</a>. Pokud zvolíte *.* použije se nastavení volby <a href="options-tab2.html">Číst a zapisovat soubory v Unicode UTF-8</a>.
</p>

<p>
Editační okno také obsahuje automatické dokončování kódu, které vám pomůže psát dotazy. Stačí začít psát dotaz a stisknout Control+Mezerník. Zobrazí 
se seznam názvů, které můžete vložit. Např. napište <i>SELECT * FROM</i>, zmáčkněte dohromady Control a mezerník a nabídne se vám seznam tabulek. 
Systém automatického dokončování je založený na kódu z <i>psql</i>, interpretru příkazové řádky PostgreSQL a proto vám nabídne ty stejné možnosti 
jako v <i>psql</i>. Volitelně můžete povolit aktivaci automatického dokončování klávesou Tab v <a href="options-tab3.html">dialogu Volby</a>.
</p>

<p>
Editor nabízí několik funkcí, které vám pomůžou s formátováním kódu:
</p>

<ul>
  <li>Funkce automatického odsazování automaticky odsazuje text na stejnou úroveň jako předchozí řádek.</li>
  <li>Odsazení bloku textu vybráním dvou nebo více řádků a stiskem klávesy Tab.</li>
  <li>Přiražení bloku textu stiskem Shift+Tab, použije se šířka odsazení uvedená v nastavení.</li>
  <li>Zakomentování SQL vybráním textu a stiskem Control+K.</li>
  <li>Odkomentování SQL vybráním textu, který začíná komentářem a stiskem Control+Shift+K.</li>
  <li>Změna vybraného textu na velká písmena stiskem Control+Shift+U.</li>
  <li>Změna vybraného textu na malá písmena stiskem Control+U.</li>
</ul>

<p>
Pokud upřednostňujete sestavení dotazu v grafické podobě, můžete použít <a href="gqb.html">Grafický tvůrce dotazů</a>, který vám následně SQL vygeneruje.
</p>

<p>
Dotaz spustíte pomocí „Provést“ z menu „Dotaz“ nebo tlačítkem „Provést dotaz“ na panelu nástrojů nebo stiskem funkční klávesy F5. Celý obsah Editoru SQL 
se pošle databázovému serveru, který jej zpracuje. Pokud chcete odeslat jen část zadaného textu, musíte jej vybrat.
</p>

<p>
„Vyložit“ v menu „Dotaz“ nebo klávesa F7 spustí příkaz EXPLAIN. Databázový server provede analýzu dotazu, který jste odeslali a vrátí výsledky.
</p>
<p>
<center><img src="images/query-analyze.png"></center>
</p>
<p>
Výsledek se zobrazí v textové podobě na kartě „Datový výstup“ a graficky vizualizovaný na kartě „Výklad“. Díky tomu můžete zjistit, jak je dotaz 
analyzován, optimalizován a prováděn. Můžete upravit stupeň zkoumání změnou „Volby výkladu“ v menu „Dotaz“. Upozorňujeme, že při volbě „Slovně“ 
(EXPLAIN VERBOSE) nelze zobrazit grafickou podobu.
</p>
<p>
V případě, že provádění dotazu, který jste odeslali pomocí „Provést“ nebo „Vyložit“, trvá déle, než jste čekali, můžete ho chtít přerušit. V tom 
případě zvolte „Zrušit“ z menu „Dotaz“ nebo na panelu nástrojů a nebo stiskněte Alt+Break.
</p>
<p>
Volbou „Spustit pgScript“ z menu „Dotaz“ namísto „Provést“, případně stejnojmenným tlačítkem na panelu nástrojů nebo stiskem funkční klávesy F6 
můžete spouštět skripty pgScript. Celý obsah okna „Editor SQL“ se odešle interpretu pgScriptu, který jej zpracuje. Skripty pgScript se skládají 
z běžných příkazů SQL, ale navíc přidávají:
</p>
<ul>
	<li>Řízení běhu skriptu (struktury <span class="fixed">IF</span> a <span class="fixed">WHILE</span>) </li>
	<li>Lokální proměnné (<span class="fixed">SET @PROMENNA = 5</span>) </li>
	<li>Generátory náhodných dat (<span class="fixed">INTEGER(10, 20)</span> nebo <span class="fixed">REFERENCE(tabulka, sloupec)</span>) </li>
</ul>
<p>
Pokud chcete více informací o jazyku pgScript, podívejte se prosím na <a href="pgscript.html">příručku skriptovacího jazyka pgScript</a>.
</p>
<p>
Pokud potřebujete nápovědu k příkazu SQL, který píšete, můžete jej označit a zvolit „Nápověda k SQL“ v menu „Nápověda“ nebo na panelu nástrojů nebo 
jednoduše stisknout F1. pgAdmin se pro vás pokusí najít patřičné informace v dokumentaci k PostgreSQL.
</p>
<p>
Výsledek dotazu zpracovaného databázovým server se zobrazí ve spodní části dotazovacího nástroje. Pokud jste poslali řadu více příkazů, zobrazený 
výsledek na kartě „Datový výstup“ náleží poslednímu příkazu SQL z této řady. Výstupy všech předchozích příkazů se zahodí.
</p>
<p>
Data z karty „Datový výstup“ můžete uložit do souboru pomocí dialogu <a href="export.html">Export</a>. 
</p>
<p>
Informace o všech právě prováděných příkazech směřují na kartu „Zprávy“. Na kartě „Historie“ se pamatují všechny provedené dotazy a jejich výsledky, 
pokud nepoužijete „Smazat historii“ z menu „Dotaz“, čímž se celá karta s historií vymaže. Pokud si historii chcete uchovat pro pozdější zkoumání, 
můžete si obsah karty „Historie“ uložit do souboru pomocí „Uložit historii“ v menu „Dotaz“.
</p>
<p>
Na stavovém řádku je uvedené, jak dlouho trvalo dokončení posledního dotazu. Pokud dotaz vrátil nějaká data, zahrnuje tento čas nejen dobu zpracování 
na serveru ale i dobu, kterou trval přenos dat ze serveru na kartu „Datový výstup“.
</p>
<p>
Ve výběrovém seznamu na panelu nástrojů můžete rychle přepínat databázi ke které jste připojení na jinou, aniž byste museli spouštět další instanci 
dotazovacího nástroje. Ze začátku je nabízena jen jedna databáze, ale volbou &lt;nové připojení&gt; na konci seznamu můžete přidávat další.
</p>
<p>
<center><img src="images/query-connect.png"></center>
</p>
<p>
V <a href="options-tab3.html">dialogu Volby</a> můžete určit počet řádků, které se mají získávat z výsledků dotazu. Výchozí hodnota je 100. Pokud je 
vracený počet větší, objeví se zpráva s dotazem, co dělat, aby se zamezilo vrácení neočekávaně velkého množství dat. Můžete nechat vrátit jen několik 
prvních řádků, jak je nastaveno v limitu nebo vrátit kompletně všechny bez ohledu na limit a nebo dotaz zrušit a výsledky nevracet.
</p>

<p>
Jestliže některé dotazy provádíte často, můžete si je přidat do menu „Oblíbené“. Když je v menu potom zvolíte, automaticky se vám vloží do editačního 
okna. S pomocí „Spravovat oblíbené...“ si můžete oblíbené položky organizovat. Jinou možností je ukládání vybrané části kódu jako 
<a href="macros.html">Makra</a>.
</p>

<p>
Součástí dotazovacího nástroje jsou mocné funkce „Hledat a nahradit“. K běžným volbám většiny takovýchto nástrojů přidávají režim hledání podle 
regulárních výrazů, což vám dává rozsáhlé možnosti pro operace hledání a nahrazování. Pokud není pgAdmin přeložený s nějakou nestandardní verzí 
wxWidgets, používá knihovnu regulárních výrazů od Henryho Spencera založenou na specifikaci 1003.2 s některými (ne úplně všemi) rozšířeními podle 
Perl5.
</p>

<p>
Další podrobné informace o syntaxi regulárních výrazů najdeted v 
<a href="http://www.wxwindows.org/manuals/2.6.3/wx_wxresyn.html#wxresyn">dokumentaci wxWidgets</a>.
</p>

</body>
</html>
