<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="STYLESHEET" type="text/css" href="pgadmin3.css">
<title>Stav databázového serveru</title>
</head>

<body>

<h3>Stav databázového serveru</h3>

<center><img src="images/status.png"></center>

<p>
Dialog „Stav serveru“ zobrazuje v panelu „Činnosti“ aktuální připojení ke každé databázi, připojené uživatele, ID procesů, adresy 
klientů a čas jejich připojení (v PostgreSQL 8.1 a novějších), aktuálně prováděný dotaz a (pokud nějaký je) a čas jeho spuštění v 
PostgreSQL 7.4 a novějších.
</p>
<p>
Pomocí tlačítka „Zrušit dotaz“ na panelu nástrojů můžete zrušit probíhající dotaz vybraného procesu. „Ukončit“ 
ukončí vybraný proces. <b>Varování:</b> Používejte obě dvě funkce s rozmyslem, protože tím ovlivníte práci daného klienta. 
Zvláště násilné ukončení procesu může ovlivnit fungování celého serveru a přinutit jej k restartu všech služeb a tím přerušení 
všech připojení klientů. Tuto funkci byste měli používat pouze při havarijním stavu, kdy daný proces již jinak nereaguje.
</p>
<p>
V panelu „Zámky“ se zobrazují zámky, které zůstaly ve správci zámků viset. Tyto informace se vám můžou hodit pokud se pokoušíte 
ladit problémy se vznikajícími smyčkami v zámcích na vašem serveru. U každého zámku se nemusí zobrazit všechny informace. Především
se místo názvu relace může objevit její OID v případě, že se relace nachází v jiné databázi, než je sledovaná.
</p>
<p>
<b>Poznámka:</b> Dialog načítá informace o zámcích z pohledu pg_locks. Při každém přístupu je chvilkově zamknutá interní datová 
struktura správce zámků PostgreSQL a pro potřeby dialogu se vytvoří kopie. To zajistí, že se v dialogu zobrazují konzistentní 
výsledky aniž by se zamykal správce operací déle, než je nutné. Přesto by to mohlo mít při častém čtení dopad na výkon databáze.
</p>
<p>
U PostgreSQL 8.1 a novějších můžete v panelu „Transakce“ sledovat nevyřešené připravené transakce. Připravené transakce jsou 
aspektem dvoufázového zápisu (2PC - Two Phase Commit) používaného ve správci distribuovaných transakcí. Obvykle připravené 
transakce řeší správce transakcí. V případech, kdy dojde k nějakému problému, může být nutné transakci schválit nebo vrátit 
zpět ručně. K tomu můžete použít tlačítka „Schválit“ nebo „Vrátit změny“.
</p>
<p>
Pokud je správně nastavený postgresql.conf (redirect_stderr = true, log_destination='stderr' a 
log_filename='postgresql-%Y-%m-%d_%H%M%S.log'), v panelu „Evidence“ se vypisují soubory s evidencí serveru. Pokud je správně nastavený 
log_line_prefix, dokáže pgAdmin oddělit časová razítka jednotlivých záznamů evidence do zvláštního sloupce. Doporučujeme použít 
formát '%t:', jiné komplikovanější formáty se nemusí interpretovat správně.
</p>
<p>
Ve výběrovém seznamu můžete volit ze starších evidencí nebo aktuální. Pokud zvolíte „Aktuální evidence“, bude pgAdmin dávat pozor 
na rotování souborů s evidencí a zobrazí vždy ten správný.
</p>
<p>
Tlačítko „Rotovat“ přinutí server rotovat soubory s evidencí. Tato funkce není zatím implementovaná pro servery verze 8.0.
</p>
<p>
Vezměte prosím na vědomí, že pro zobrazení evidence jsou zapotřebí <a href="extend.html">rozšiřující funkce</a> nahrané na serveru 
a ty jsou dostupné jen pro servery verze 8.x.
</p>
<p>
Údaje v panelech se v pravidelném intervalu občerstvují. Tento interval je stejný pro všechny panely. Informace lze občerstvit i 
ručně tlačítkem „Občerstvit“ na panelu nástrojů.
</p>
<p>
Panely lze skrýt kliknutím na zavírací tlačítko nebo pomocí příslušné položky v menu „Zobrazit“.
</p>
<p>
Kterýkoliv řádek z v panelech s můžete zkopírovat do schránky. Stačí jej vybrat a kliknout na tlačítko „Kopírovat“ na panelu nástrojů.
</p>
</body>

</html>
