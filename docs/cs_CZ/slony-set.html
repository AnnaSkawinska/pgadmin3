<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="STYLESHEET" type="text/css" href="pgadmin3.css">
<title>Vytvoření sad a odběrů</title>
</head>

<body>
<h3>Vytvoření sad a odběrů</h3>


<a name="set"></a>
<h4>Vytvoření replikační sady</h4>
<br />
<center><img src="images/slony-set.png"></center>
<p>
Slony-I sdružuje tabulky a sekvence, které se mají replikovat, do replikačních sad. Sady se vytváří ve zdrojovém uzlu.
</p>

<a name="table"></a>
<h4>Definice replikované tabulky</h4>
<br />
<center><img src="images/slony-table.png"></center>
<p>
Pokud má zdrojová tabulka definovaný nějaký trigger, musí být tento v cílovém uzlu replikace zakázaný. V replikačním prostředí ale může nastat situace, 
že se role master a slave vymění. Proto je nutné umět v takovýchto situacích triggery povolovat a zakazovat. Na kartě „Trigger“ můžete zvolit, které 
triggery by měl Slony-I povolit a zakázat pokud je to zapotřebí.
</p>
<p>
<b>Varování</b>: Pokud se ve výběrovém seznamu neobjevuje tabulka, kterou potřebujete, tak je to obvykle tím, že postrádá jedinečný index. Slony-I 
potřebuje, aby bylo možné každý řádek replikované tabulky jednoznačně identifikovat. Obvykle to zajišťuje primární klíč, ale pro potřeby replikace 
postačuje jakýkoliv jedinečný klíč.
</p>
<p>
I když má Slony-I pomocnou funkci na vytvoření přechodných jedinečných klíčů, není to podporované v tabulkách, které jsou do replikační sady přidané 
v pgAdmin III. Proto vám důrazně doporučujeme v tabulkách, které se budou replikovat, vytvořit primární klíč.
</p>

<a name="sequence"></a>
<h4>Definice replikované sekvence</h4>
<br />
<center><img src="images/slony-sequence.png"></center>
<p>
Sekvence umožňuje přidat sekvence do replikační sady.
</p>

<a name="subscription"></a>
<h4>Odběry a replikační sady</h4>
<br />
<center><img src="images/slony-subscription.png"></center>
<p>
Po nadefinování replikační sady, může být tato přihlášena k odběru. Ve zdrojovém uzlu se musí vytvořit odběry (poznámka: ve Slony-I starším než 1.1 
se to naopak dělalo v cílovém uzlu).
</p><p>
Po té, co je sada přihlášená k odběru, nelze již měnit definice tabulek a sekvencí. Pokud chcete přidat další tabulky, můžete vytvořit další sadu 
obsahující tabulky a sekvence, které chcete přidat do první sady. Přihlaste k odběru ty stejné uzly, jako v první sadě a nakonec použijte funkci 
<a href="slony-functions.html#merge">Sloučit sadu</a>, která spojí obě sady do jedné.
</p>
</body>
</html>
